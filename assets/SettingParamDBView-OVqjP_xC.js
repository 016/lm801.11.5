import{L as J,j as K,_ as Q,B as X,W as Y,a as Z}from"./projectKeys-D9olvO5x.js";import{u as I,r as f,w as $,o as ee,c as U,b,d as s,e as c,f as m,t as d,g as u,h as i,R as te,i as se,v as le,n as L,F as P,k as S,l as M}from"./index-C24wLpFT.js";import{r as oe}from"./request-COFDaRr5.js";const ae=()=>oe.get("/v1/setting-params",{limit:1e3}),ie={class:"app-content-header"},ne={class:"container-fluid"},de={class:"row"},re={class:"col-sm-6"},ce={class:"mb-0"},ue={class:"fs-6"},pe={class:"col-sm-6"},me={class:"breadcrumb float-sm-end"},_e={class:"breadcrumb-item"},ve={class:"breadcrumb-item active","aria-current":"page"},he={class:"app-content"},we={class:"container-fluid"},ye={class:"row"},ge={class:"col-lg-12"},fe={class:"card mb-4 mt-2"},be={class:"card-header p-2 pt-3 pb-0"},Se={class:"row"},Ce={class:"col-lg-3"},Ve={class:"input-group mb-3"},Ue=["placeholder"],Te={class:"col-lg-3"},Pe={class:"container"},xe={class:"row"},Be={class:"col-6"},Me={class:"col-lg-3"},Le={class:"container"},ke={class:"row"},Ee={class:"col-6"},$e={class:"col-lg-3"},Oe={class:"container"},je={class:"row"},Ae={class:"col-6"},He={class:"col-lg-3"},Fe={class:"container"},Re={class:"row"},ze={class:"col-6"},Ne={class:"col-lg-3"},We={class:"d-grid gap-2 mb-2"},qe={class:"col-lg-3"},Ge={class:"d-grid gap-2 mb-2"},De={class:"card-body p-2"},Je={class:"flex gap-4"},Ke=["onClick"],Ie={__name:"SettingParamDBView",setup(Qe){const{t:a,locale:O}=I(),p=new J(K),C=f({pageSize:20,page:1,search:""}),V=f({compare:!1}),r=f({col_common:!1,col_combat:!1,settingParam_type:!0,highUse:!0,changeByMod:!0}),_=f({}),T=f([]),h=f({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0},31:{type_id:31,isShown:!0},41:{type_id:41,isShown:!0},51:{type_id:51,isShown:!0},61:{type_id:61,isShown:!0},71:{type_id:71,isShown:!0},81:{type_id:81,isShown:!0},82:{type_id:82,isShown:!0}}),w=f({0:{type_id:0,isShown:!0},1:{type_id:1,isShown:!0}}),y=f({0:{type_id:0,isShown:!0},1:{type_id:1,isShown:!0}}),v=f([{field:"sp_code",titleCode:"settingParam.attr.sp_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"sp_title_t",titleCode:"settingParam.attr.sp_title",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_desc_t",titleCode:"settingParam.attr.sp_desc",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_id",titleCode:"settingParam.attr.sp_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"sp_version_t",titleCode:"settingParam.attr.sp_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"sp_mod_t",titleCode:"settingParam.attr.sp_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"sp_valueType_t",titleCode:"settingParam.attr.sp_valueType_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_type_t",titleCode:"settingParam.attr.sp_type_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_highUse_t",titleCode:"settingParam.attr.sp_highUse",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_changeByMod_t",titleCode:"settingParam.attr.sp_changeByMod",colType:"common",title:"",hide:!1,isShown:!0}]);$(O,()=>{E()}),ee(async()=>{T.value=await ae(),G(),p.loadLS(["showAll","params","compareList","rawCols","selectedSettingParamType","selectedHighUse","selectedChangeByMod","filter_params"],{showAll:r,params:C,compareList:_,rawCols:v,selectedSettingParamType:h,selectedHighUse:w,selectedChangeByMod:y,filter_params:V}),p.isCacheEnabled.value&&k(),E(),p.appReady.value=!0}),$([v,r,C,V,h,w,y,_],()=>{p.appReady.value&&!p.initialLoad.value&&p.saveLS({showAll:r.value,params:C.value,filter_params:V.value,rawCols:v.value,selectedSettingParamType:h.value,selectedHighUse:w.value,selectedChangeByMod:y.value,compareList:_.value}),p.appReady.value&&(p.initialLoad.value=!1)},{deep:!0});const j=U(()=>v.value.filter(t=>t.colType==="common"));U(()=>v.value.filter(t=>t.colType==="combat"));const A=U(()=>v.value.reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+v.value.length),H=U(()=>Object.values(h.value).reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+Object.keys(h.value).length),F=U(()=>Object.values(w.value).reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+Object.keys(w.value).length),R=U(()=>Object.values(y.value).reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+Object.keys(y.value).length),z=U(()=>Object.values(_.value).reduce((e,o)=>e+(o?1:0),0)+"/"+T.value.length),N=U(()=>{let t=T.value.filter(e=>{var o;return(o=h.value[e.sp_type_id])==null?void 0:o.isShown}).filter(e=>{var o;return(o=w.value[e.sp_highUse])==null?void 0:o.isShown}).filter(e=>{var o;return(o=y.value[e.sp_changeByMod])==null?void 0:o.isShown});return V.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,sp_version_t:a("game.version-list."+e.sp_version_id),sp_mod_t:a("game.mod-list."+e.sp_mod_id),sp_type_t:a("settingParam.type."+e.sp_type_id),sp_title_t:a("settingParam.title.sp_"+e.sp_id),sp_desc_t:a("settingParam.desc.sp_"+e.sp_id),sp_valueType_t:a("settingParam.valueType."+e.sp_valueType_id),sp_highUse_t:a("common.yesno."+e.sp_highUse),sp_changeByMod_t:a("common.yesno."+e.sp_changeByMod)}))}),W=t=>{k(),V.value[t]=!V.value[t]},k=()=>{T.value.forEach((t,e)=>{t._isCompare=!1,_.value[t._index]&&(t._isCompare=_.value[t._index])})},E=()=>{v.value.forEach(t=>{t.title=a(t.titleCode)})},q=t=>{t.hide=!t.isShown},x=t=>{const e=r.value[t];if(t.slice(0,4)==="col_"){const o=t.slice(4,99);v.value.forEach(n=>{n.colType===o&&(n.isShown=e,n.hide=!e)})}t==="settingParam_type"&&Object.keys(h.value).forEach(o=>{const n=h.value[o];n.isShown=e}),t==="highUse"&&Object.keys(w.value).forEach(o=>{const n=w.value[o];n.isShown=e}),t==="changeByMod"&&Object.keys(y.value).forEach(o=>{const n=y.value[o];n.isShown=e})},G=()=>{T.value.forEach((t,e)=>{t.sp_version_t="",t.sp_mod_t="",t.sp_type_t="",t.sp_title_t="",t.sp_highUse_t="",t.sp_changeByMod_t="",t._index=e,t._isCompare=!1})},D=t=>{t.value._isCompare=!t.value._isCompare,_.value[t.value._index]===void 0&&(_.value[t.value._index]=!1),_.value[t.value._index]=!_.value[t.value._index]};return(t,e)=>{const o=Q,n=Z,B=X;return S(),b(P,null,[s("div",ie,[s("div",ne,[s("div",de,[s("div",re,[s("h3",ce,[m(d(t.$t("view.settingParam-db.title"))+" ",1),s("small",null,d(t.$t("view.settingParam-db.version")),1),e[11]||(e[11]=m()),s("small",ue,d(t.$t("view.settingParam-db.desc")),1)])]),s("div",pe,[s("ol",me,[s("li",_e,[c(i(te),{to:"/"},{default:u(()=>e[12]||(e[12]=[m("Home")])),_:1})]),s("li",ve,d(t.$t("view.settingParam-db.title")),1)])])]),c(o)])]),s("div",he,[s("div",we,[s("div",ye,[s("div",ge,[s("div",fe,[s("div",be,[s("div",Se,[s("div",Ce,[s("div",Ve,[e[13]||(e[13]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-search"})],-1)),se(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>C.value.search=l),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,Ue),[[le,C.value.search]])])]),s("div",Te,[c(B,{text:i(a)("view.settingParam-db.label_colShown",{cnt:A.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",Pe,[e[14]||(e[14]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(n,{modelValue:r.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=l=>r.value.col_common=l),e[2]||(e[2]=l=>x("col_common"))],switch:"",state:r.value.col_common?!0:null},{default:u(()=>[m(d(i(a)("view.settingParam-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),s("div",xe,[(S(!0),b(P,null,M(j.value,l=>(S(),b("div",Be,[c(n,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[g=>l.isShown=g,g=>q(l)],switch:"",state:l.isShown?!0:null},{default:u(()=>[m(d(i(a)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",Me,[c(B,{text:i(a)("view.settingParam-db.label_highUseShown",{cnt:F.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",Le,[e[15]||(e[15]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(n,{modelValue:r.value.highUse,"onUpdate:modelValue":[e[3]||(e[3]=l=>r.value.highUse=l),e[4]||(e[4]=l=>x("highUse"))],switch:"",state:r.value.highUse?!0:null},{default:u(()=>[m(d(i(a)("view.settingParam-db.label_selectAll")),1)]),_:1},8,["modelValue","state"]),s("div",ke,[(S(!0),b(P,null,M(w.value,l=>(S(),b("div",Ee,[c(n,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":g=>l.isShown=g,switch:"",state:l.isShown?!0:null},{default:u(()=>[m(d(i(a)("common.yesno."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",$e,[c(B,{text:i(a)("view.settingParam-db.label_changeByModShown",{cnt:R.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",Oe,[e[16]||(e[16]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(n,{modelValue:r.value.changeByMod,"onUpdate:modelValue":[e[5]||(e[5]=l=>r.value.changeByMod=l),e[6]||(e[6]=l=>x("changeByMod"))],switch:"",state:r.value.changeByMod?!0:null},{default:u(()=>[m(d(i(a)("view.settingParam-db.label_selectAll")),1)]),_:1},8,["modelValue","state"]),s("div",je,[(S(!0),b(P,null,M(y.value,l=>(S(),b("div",Ae,[c(n,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":g=>l.isShown=g,switch:"",state:l.isShown?!0:null},{default:u(()=>[m(d(i(a)("common.yesno."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",He,[c(B,{text:i(a)("view.settingParam-db.label_typeShown",{cnt:H.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",Fe,[e[17]||(e[17]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(n,{modelValue:r.value.settingParam_type,"onUpdate:modelValue":[e[7]||(e[7]=l=>r.value.settingParam_type=l),e[8]||(e[8]=l=>x("settingParam_type"))],switch:"",state:r.value.settingParam_type?!0:null},{default:u(()=>[m(d(i(a)("view.settingParam-db.label_selectAllType")),1)]),_:1},8,["modelValue","state"]),s("div",Re,[(S(!0),b(P,null,M(h.value,l=>(S(),b("div",ze,[c(n,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":g=>l.isShown=g,switch:"",state:l.isShown?!0:null},{default:u(()=>[m(d(i(a)("settingParam.type."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",Ne,[s("div",We,[s("button",{class:L(["btn",[V.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[9]||(e[9]=l=>W("compare"))},d(V.value.compare?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+d(i(a)("common.label.compare"))+" "+d(z.value),3)])]),s("div",qe,[s("div",Ge,[s("button",{class:L(["btn",[i(p).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[10]||(e[10]=l=>i(p).switchCache())},d(i(p).isCacheEnabled.value?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+d(i(a)("common.label.localStorage")),3)])])])]),e[18]||(e[18]=s("div",null,null,-1)),s("div",De,[c(i(Y),{rows:N.value,columns:v.value,sortable:!0,cloneHeaderInFooter:!0,stickyFirstColumn:!0,search:C.value.search,page:C.value.page,pageSize:C.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:u(l=>[s("div",Je,[s("button",{type:"button",class:L(["btn",[l.value._isCompare?"btn-success":"btn-secondary"]]),onClick:g=>D(l)},d(l.value._isCompare?"+":"-"),11,Ke)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[19]||(e[19]=s("div",{class:"card-footer clearfix"},[s("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{Ie as default};
