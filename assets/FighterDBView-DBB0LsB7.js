import{r as G,L as J,F as K,B as Q,W as X,_ as Y,a as Z}from"./projectKeys-2vSwfoFk.js";import{u as ee,r as S,w as O,o as te,c as T,a as w,b as l,t as r,d as le,v as oe,e as d,f as c,g as a,n as $,F as x,h as g,i as C,j as L}from"./index-D534md0n.js";const se=()=>G.get("/v1/fighters",{limit:500}),ie={class:"app-content-header"},ae={class:"container-fluid"},ne={class:"row"},re={class:"col-sm-6"},de={class:"mb-0"},ce={class:"col-sm-6"},ue={class:"breadcrumb float-sm-end"},_e={class:"breadcrumb-item active","aria-current":"page"},me={class:"app-content"},pe={class:"container-fluid"},fe={class:"row"},he={class:"col-lg-12"},ve={class:"card mb-4 mt-2"},we={class:"card-header p-2 pt-3 pb-0"},ge={class:"row"},ye={class:"col-lg-3"},be={class:"input-group mb-3"},Se=["placeholder"],Ce={class:"col-lg-3"},Te={class:"container"},Ve={class:"row"},xe={class:"col-6"},Fe={class:"row"},Le={class:"col-6"},Ue={class:"col-lg-3"},$e={class:"container"},ke={class:"row"},Ee={class:"col-6"},Be={class:"col-lg-3"},Oe={class:"container"},Ae={class:"row"},je={class:"col-6"},De={class:"col-lg-3"},Ie={class:"d-grid gap-2 mb-2"},We={class:"col-lg-3"},ze={class:"d-grid gap-2 mb-2"},Re={class:"card-body p-2"},He={class:"flex gap-4"},Ne=["onClick"],Ge={__name:"FighterDBView",setup(qe){const{t:s,locale:A}=ee(),u=new J(K),y=S({pageSize:20,page:2,search:""}),b=S({compare:!1}),n=S({col_common:!1,col_combat:!1,fighter_type:!0,fighter_design_type:!0}),_=S({}),V=S([]),f=S({1:{type_id:1,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0},31:{type_id:31,isShown:!0}}),h=S({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0},11:{type_id:11,isShown:!0}}),m=S([{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"f_id",titleCode:"fighter.attr.f_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"f_title_t",titleCode:"fighter.attr.f_title_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"f_version_t",titleCode:"fighter.attr.f_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"f_mod_t",titleCode:"fighter.attr.f_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"f_type_t",titleCode:"fighter.attr.f_type_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"f_role_t",titleCode:"fighter.attr.f_role_code",colType:"common",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"f_design_type_t",titleCode:"fighter.attr.f_design_type_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"f_system_t",titleCode:"fighter.attr.f_system_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"f_weapon_t",titleCode:"fighter.attr.f_weapon",colType:"combat",title:"",hide:!1,isShown:!0},{field:"f_op",titleCode:"fighter.attr.f_op",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_range",titleCode:"fighter.attr.f_range",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_speed",titleCode:"fighter.attr.f_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_hull",titleCode:"fighter.attr.f_hull",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_armor",titleCode:"fighter.attr.f_armor",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_shield",titleCode:"fighter.attr.f_shield",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_unman",titleCode:"fighter.attr.f_unman",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"f_crew_per_fighter",titleCode:"fighter.attr.f_crew_per_fighter",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_fighters_in_wing",titleCode:"fighter.attr.f_fighters_in_wing",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_brt",titleCode:"fighter.attr.f_brt",colType:"combat",title:"",type:"number",hide:!0,isShown:!1}]);O(A,()=>{E()}),te(async()=>{V.value=await se(),q(),u.loadLS(["showAll","params","compareList","rawCols","selectedFighterType","selectedFighterDesignType","filter_params"],{showAll:n,params:y,compareList:_,rawCols:m,selectedFighterType:f,selectedFighterDesignType:h,filter_params:b}),u.isCacheEnabled.value&&k(),E(),u.appReady.value=!0}),O([m,n,y,b,f,h,_],()=>{console.log("watch working.1"),u.appReady.value&&!u.initialLoad.value&&(console.log("watch working.2"),u.saveLS({showAll:n.value,params:y.value,filter_params:b.value,rawCols:m.value,selectedFighterType:f.value,selectedFighterDesignType:h.value,compareList:_.value})),u.appReady.value&&(u.initialLoad.value=!1)},{deep:!0});const j=T(()=>m.value.filter(t=>t.colType==="common")),D=T(()=>m.value.filter(t=>t.colType==="combat")),I=T(()=>m.value.reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+m.value.length),W=T(()=>Object.values(f.value).reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+Object.keys(f.value).length),z=T(()=>Object.values(h.value).reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+Object.keys(h.value).length),R=T(()=>Object.values(_.value).reduce((e,i)=>e+(i?1:0),0)+"/"+V.value.length),H=T(()=>{let t=V.value.filter(e=>f.value[e.f_type_id].isShown).filter(e=>h.value[e.f_design_type_id].isShown);return b.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,f_version_t:s("game.version-list."+e.f_version_id),f_mod_t:s("game.mod-list."+e.f_mod_id),f_type_t:s("fighter.type."+e.f_type_id),f_role_t:s("fighter.role."+e.f_role_code),f_title_t:s("fighter.title."+e.f_title_code),f_design_type_t:s("fighter.design_type."+e.f_design_type_id),f_system_t:s("ship.sys."+e.f_system_code),f_weapon_t:M(e)}))}),N=t=>{k(),b.value[t]=!b.value[t]},k=()=>{V.value.forEach((t,e)=>{t._isCompare=!1,_.value[t._index]&&(t._isCompare=_.value[t._index])})},E=()=>{m.value.forEach(t=>{t.title=s(t.titleCode)})},B=t=>{t.hide=!t.isShown},F=t=>{const e=n.value[t];if(t.slice(0,4)==="col_"){const i=t.slice(4,99);m.value.forEach(v=>{v.colType===i&&(v.isShown=e,v.hide=!e)})}t==="fighter_type"&&Object.keys(f.value).forEach(i=>{const v=f.value[i];v.isShown=e}),t==="fighter_design_type"&&Object.keys(h.value).forEach(i=>{const v=h.value[i];v.isShown=e})},q=()=>{V.value.forEach((t,e)=>{t.f_version_t="",t.f_mod_t="",t.f_type_t="",t.f_role_t="",t.f_title_t="",t.f_design_type_t="",t.f_system_t="",t.f_weapon_t="",t._index=e,t._isCompare=!1})},M=t=>{let e="";return t.f_arm_1&&(e!=""&&(e+=","),e+=s("weapon.title."+t.f_arm_1)+"x"+t.f_arm_1_cnt),e},P=t=>{t.value._isCompare=!t.value._isCompare,_.value[t.value._index]===void 0&&(_.value[t.value._index]=!1),_.value[t.value._index]=!_.value[t.value._index]};return(t,e)=>{const i=Y,v=Z,U=Q;return g(),w(x,null,[l("div",ie,[l("div",ae,[l("div",ne,[l("div",re,[l("h3",de,r(t.$t("view.fighter-db.title")),1)]),l("div",ce,[l("ol",ue,[e[11]||(e[11]=l("li",{class:"breadcrumb-item"},[l("a",{href:"#"},"Home")],-1)),l("li",_e,r(t.$t("view.fighter-db.title")),1)])])])])]),l("div",me,[l("div",pe,[l("div",fe,[l("div",he,[l("div",ve,[l("div",we,[l("div",ge,[l("div",ye,[l("div",be,[e[12]||(e[12]=l("span",{class:"input-group-text"},[l("i",{class:"bi bi-search"})],-1)),le(l("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>y.value.search=o),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,Se),[[oe,y.value.search]])])]),l("div",Ce,[d(U,{text:a(s)("view.fighter-db.label_fighterColShown",{cnt:I.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",Te,[e[13]||(e[13]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),d(i,{modelValue:n.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=o=>n.value.col_common=o),e[2]||(e[2]=o=>F("col_common"))],switch:"",state:n.value.col_common?!0:null},{default:c(()=>[C(r(a(s)("view.fighter-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),l("div",Ve,[(g(!0),w(x,null,L(j.value,o=>(g(),w("div",xe,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":[p=>o.isShown=p,p=>B(o)],switch:"",state:o.isShown?!0:null},{default:c(()=>[C(r(a(s)(o.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),d(v),d(i,{modelValue:n.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=o=>n.value.col_combat=o),e[4]||(e[4]=o=>F("col_combat"))],switch:"",state:n.value.col_combat?!0:null},{default:c(()=>[C(r(a(s)("view.fighter-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),l("div",Fe,[(g(!0),w(x,null,L(D.value,o=>(g(),w("div",Le,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":[p=>o.isShown=p,p=>B(o)],switch:"",state:o.isShown?!0:null},{default:c(()=>[C(r(a(s)(o.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",Ue,[d(U,{text:a(s)("view.fighter-db.label_fighterTypeShown",{cnt:W.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",$e,[e[14]||(e[14]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),d(i,{modelValue:n.value.fighter_type,"onUpdate:modelValue":[e[5]||(e[5]=o=>n.value.fighter_type=o),e[6]||(e[6]=o=>F("fighter_type"))],switch:"",state:n.value.fighter_type?!0:null},{default:c(()=>[C(r(a(s)("view.fighter-db.label_selectAllFighterType")),1)]),_:1},8,["modelValue","state"]),l("div",ke,[(g(!0),w(x,null,L(f.value,o=>(g(),w("div",Ee,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":p=>o.isShown=p,switch:"",state:o.isShown?!0:null},{default:c(()=>[C(r(a(s)("fighter.type."+o.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",Be,[d(U,{text:a(s)("view.fighter-db.label_fighterDesignTypeShown",{cnt:z.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",Oe,[e[15]||(e[15]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),d(i,{modelValue:n.value.fighter_design_type,"onUpdate:modelValue":[e[7]||(e[7]=o=>n.value.fighter_design_type=o),e[8]||(e[8]=o=>F("fighter_design_type"))],switch:"",state:n.value.fighter_design_type?!0:null},{default:c(()=>[C(r(a(s)("view.fighter-db.label_selectAllFighterDesignType")),1)]),_:1},8,["modelValue","state"]),l("div",Ae,[(g(!0),w(x,null,L(h.value,o=>(g(),w("div",je,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":p=>o.isShown=p,switch:"",state:o.isShown?!0:null},{default:c(()=>[C(r(a(s)("fighter.design_type."+o.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",De,[l("div",Ie,[l("button",{class:$(["btn",[b.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[9]||(e[9]=o=>N("compare"))},r(b.value.compare?a(s)("common.label.on"):a(s)("common.label.off"))+"-"+r(a(s)("common.label.compare"))+" "+r(R.value),3)])]),l("div",We,[l("div",ze,[l("button",{class:$(["btn",[a(u).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[10]||(e[10]=o=>a(u).switchCache())},r(a(u).isCacheEnabled.value?a(s)("common.label.on"):a(s)("common.label.off"))+"-"+r(a(s)("common.label.localStorage")),3)])])])]),e[16]||(e[16]=l("div",null,null,-1)),l("div",Re,[d(a(X),{rows:H.value,columns:m.value,sortable:!0,cloneHeaderInFooter:!0,search:y.value.search,page:y.value.page,pageSize:y.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:c(o=>[l("div",He,[l("button",{type:"button",class:$(["btn",[o.value._isCompare?"btn-success":"btn-secondary"]]),onClick:p=>P(o)},r(o.value._isCompare?"+":"-"),11,Ne)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[17]||(e[17]=l("div",{class:"card-footer clearfix"},[l("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{Ge as default};
