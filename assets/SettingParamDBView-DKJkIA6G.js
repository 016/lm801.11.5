import{r as D,L as J,h as K,B as Q,W as X,_ as Y}from"./projectKeys-BFrVwNtN.js";import{u as Z,r as f,w as $,o as I,c as U,b,d as s,f as m,t as n,e as c,g as u,h as i,R as ee,i as te,v as se,n as M,F as P,j as S,k as B}from"./index-BhvPb4iu.js";const le=()=>D.get("/v1/setting-params",{limit:1e3}),oe={class:"app-content-header"},ae={class:"container-fluid"},ie={class:"row"},ne={class:"col-sm-6"},de={class:"mb-0"},re={class:"fs-6"},ce={class:"col-sm-6"},ue={class:"breadcrumb float-sm-end"},pe={class:"breadcrumb-item"},me={class:"breadcrumb-item active","aria-current":"page"},_e={class:"app-content"},ve={class:"container-fluid"},he={class:"row"},we={class:"col-lg-12"},ye={class:"card mb-4 mt-2"},ge={class:"card-header p-2 pt-3 pb-0"},fe={class:"row"},be={class:"col-lg-3"},Se={class:"input-group mb-3"},Ce=["placeholder"],Ve={class:"col-lg-3"},Ue={class:"container"},Te={class:"row"},Pe={class:"col-6"},xe={class:"col-lg-3"},Be={class:"container"},Me={class:"row"},Le={class:"col-6"},ke={class:"col-lg-3"},$e={class:"container"},Ee={class:"row"},Oe={class:"col-6"},je={class:"col-lg-3"},Ae={class:"container"},He={class:"row"},Fe={class:"col-6"},Re={class:"col-lg-3"},ze={class:"d-grid gap-2 mb-2"},Ne={class:"col-lg-3"},We={class:"d-grid gap-2 mb-2"},qe={class:"card-body p-2"},Ge={class:"flex gap-4"},De=["onClick"],Xe={__name:"SettingParamDBView",setup(Je){const{t:a,locale:E}=Z(),p=new J(K),C=f({pageSize:20,page:1,search:""}),V=f({compare:!1}),d=f({col_common:!1,col_combat:!1,settingParam_type:!0,highUse:!0,changeByMod:!0}),_=f({}),T=f([]),h=f({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0},31:{type_id:31,isShown:!0},41:{type_id:41,isShown:!0},51:{type_id:51,isShown:!0},61:{type_id:61,isShown:!0},71:{type_id:71,isShown:!0},81:{type_id:81,isShown:!0},82:{type_id:82,isShown:!0}}),w=f({0:{type_id:0,isShown:!0},1:{type_id:1,isShown:!0}}),y=f({0:{type_id:0,isShown:!0},1:{type_id:1,isShown:!0}}),v=f([{field:"sp_code",titleCode:"settingParam.attr.sp_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"sp_title_t",titleCode:"settingParam.attr.sp_title",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_desc_t",titleCode:"settingParam.attr.sp_desc",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_id",titleCode:"settingParam.attr.sp_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"sp_version_t",titleCode:"settingParam.attr.sp_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"sp_mod_t",titleCode:"settingParam.attr.sp_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"sp_valueType_t",titleCode:"settingParam.attr.sp_valueType_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_type_t",titleCode:"settingParam.attr.sp_type_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_highUse_t",titleCode:"settingParam.attr.sp_highUse",colType:"common",title:"",hide:!1,isShown:!0},{field:"sp_changeByMod_t",titleCode:"settingParam.attr.sp_changeByMod",colType:"common",title:"",hide:!1,isShown:!0}]);$(E,()=>{k()}),I(async()=>{T.value=await le(),q(),p.loadLS(["showAll","params","compareList","rawCols","selectedSettingParamType","selectedHighUse","selectedChangeByMod","filter_params"],{showAll:d,params:C,compareList:_,rawCols:v,selectedSettingParamType:h,selectedHighUse:w,selectedChangeByMod:y,filter_params:V}),p.isCacheEnabled.value&&L(),k(),p.appReady.value=!0}),$([v,d,C,V,h,w,y,_],()=>{p.appReady.value&&!p.initialLoad.value&&p.saveLS({showAll:d.value,params:C.value,filter_params:V.value,rawCols:v.value,selectedSettingParamType:h.value,selectedHighUse:w.value,selectedChangeByMod:y.value,compareList:_.value}),p.appReady.value&&(p.initialLoad.value=!1)},{deep:!0});const O=U(()=>v.value.filter(t=>t.colType==="common"));U(()=>v.value.filter(t=>t.colType==="combat"));const j=U(()=>v.value.reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+v.value.length),A=U(()=>Object.values(h.value).reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+Object.keys(h.value).length),H=U(()=>Object.values(w.value).reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+Object.keys(w.value).length),F=U(()=>Object.values(y.value).reduce((e,o)=>e+(o.isShown?1:0),0)+"/"+Object.keys(y.value).length),R=U(()=>Object.values(_.value).reduce((e,o)=>e+(o?1:0),0)+"/"+T.value.length),z=U(()=>{let t=T.value.filter(e=>{var o;return(o=h.value[e.sp_type_id])==null?void 0:o.isShown}).filter(e=>{var o;return(o=w.value[e.sp_highUse])==null?void 0:o.isShown}).filter(e=>{var o;return(o=y.value[e.sp_changeByMod])==null?void 0:o.isShown});return V.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,sp_version_t:a("game.version-list."+e.sp_version_id),sp_mod_t:a("game.mod-list."+e.sp_mod_id),sp_type_t:a("settingParam.type."+e.sp_type_id),sp_title_t:a("settingParam.title.sp_"+e.sp_id),sp_desc_t:a("settingParam.desc.sp_"+e.sp_id),sp_valueType_t:a("settingParam.valueType."+e.sp_valueType_id),sp_highUse_t:a("common.yesno."+e.sp_highUse),sp_changeByMod_t:a("common.yesno."+e.sp_changeByMod)}))}),N=t=>{L(),V.value[t]=!V.value[t]},L=()=>{T.value.forEach((t,e)=>{t._isCompare=!1,_.value[t._index]&&(t._isCompare=_.value[t._index])})},k=()=>{v.value.forEach(t=>{t.title=a(t.titleCode)})},W=t=>{t.hide=!t.isShown},x=t=>{const e=d.value[t];if(t.slice(0,4)==="col_"){const o=t.slice(4,99);v.value.forEach(r=>{r.colType===o&&(r.isShown=e,r.hide=!e)})}t==="settingParam_type"&&Object.keys(h.value).forEach(o=>{const r=h.value[o];r.isShown=e}),t==="highUse"&&Object.keys(w.value).forEach(o=>{const r=w.value[o];r.isShown=e}),t==="changeByMod"&&Object.keys(y.value).forEach(o=>{const r=y.value[o];r.isShown=e})},q=()=>{T.value.forEach((t,e)=>{t.sp_version_t="",t.sp_mod_t="",t.sp_type_t="",t.sp_title_t="",t.sp_highUse_t="",t.sp_changeByMod_t="",t._index=e,t._isCompare=!1})},G=t=>{t.value._isCompare=!t.value._isCompare,_.value[t.value._index]===void 0&&(_.value[t.value._index]=!1),_.value[t.value._index]=!_.value[t.value._index]};return(t,e)=>{const o=Y,r=Q;return S(),b(P,null,[s("div",oe,[s("div",ae,[s("div",ie,[s("div",ne,[s("h3",de,[m(n(t.$t("view.settingParam-db.title"))+" ",1),s("small",null,n(t.$t("view.settingParam-db.version")),1),e[11]||(e[11]=m()),s("small",re,n(t.$t("view.settingParam-db.desc")),1)])]),s("div",ce,[s("ol",ue,[s("li",pe,[c(i(ee),{to:"/"},{default:u(()=>e[12]||(e[12]=[m("Home")])),_:1})]),s("li",me,n(t.$t("view.settingParam-db.title")),1)])])])])]),s("div",_e,[s("div",ve,[s("div",he,[s("div",we,[s("div",ye,[s("div",ge,[s("div",fe,[s("div",be,[s("div",Se,[e[13]||(e[13]=s("span",{class:"input-group-text"},[s("i",{class:"bi bi-search"})],-1)),te(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>C.value.search=l),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,Ce),[[se,C.value.search]])])]),s("div",Ve,[c(r,{text:i(a)("view.settingParam-db.label_colShown",{cnt:j.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",Ue,[e[14]||(e[14]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(o,{modelValue:d.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=l=>d.value.col_common=l),e[2]||(e[2]=l=>x("col_common"))],switch:"",state:d.value.col_common?!0:null},{default:u(()=>[m(n(i(a)("view.settingParam-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),s("div",Te,[(S(!0),b(P,null,B(O.value,l=>(S(),b("div",Pe,[c(o,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[g=>l.isShown=g,g=>W(l)],switch:"",state:l.isShown?!0:null},{default:u(()=>[m(n(i(a)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",xe,[c(r,{text:i(a)("view.settingParam-db.label_highUseShown",{cnt:H.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",Be,[e[15]||(e[15]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(o,{modelValue:d.value.highUse,"onUpdate:modelValue":[e[3]||(e[3]=l=>d.value.highUse=l),e[4]||(e[4]=l=>x("highUse"))],switch:"",state:d.value.highUse?!0:null},{default:u(()=>[m(n(i(a)("view.settingParam-db.label_selectAll")),1)]),_:1},8,["modelValue","state"]),s("div",Me,[(S(!0),b(P,null,B(w.value,l=>(S(),b("div",Le,[c(o,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":g=>l.isShown=g,switch:"",state:l.isShown?!0:null},{default:u(()=>[m(n(i(a)("common.yesno."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",ke,[c(r,{text:i(a)("view.settingParam-db.label_changeByModShown",{cnt:F.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",$e,[e[16]||(e[16]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(o,{modelValue:d.value.changeByMod,"onUpdate:modelValue":[e[5]||(e[5]=l=>d.value.changeByMod=l),e[6]||(e[6]=l=>x("changeByMod"))],switch:"",state:d.value.changeByMod?!0:null},{default:u(()=>[m(n(i(a)("view.settingParam-db.label_selectAll")),1)]),_:1},8,["modelValue","state"]),s("div",Ee,[(S(!0),b(P,null,B(y.value,l=>(S(),b("div",Oe,[c(o,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":g=>l.isShown=g,switch:"",state:l.isShown?!0:null},{default:u(()=>[m(n(i(a)("common.yesno."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",je,[c(r,{text:i(a)("view.settingParam-db.label_typeShown",{cnt:A.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:u(()=>[s("div",Ae,[e[17]||(e[17]=s("div",{class:"row"},[s("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(o,{modelValue:d.value.settingParam_type,"onUpdate:modelValue":[e[7]||(e[7]=l=>d.value.settingParam_type=l),e[8]||(e[8]=l=>x("settingParam_type"))],switch:"",state:d.value.settingParam_type?!0:null},{default:u(()=>[m(n(i(a)("view.settingParam-db.label_selectAllType")),1)]),_:1},8,["modelValue","state"]),s("div",He,[(S(!0),b(P,null,B(h.value,l=>(S(),b("div",Fe,[c(o,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":g=>l.isShown=g,switch:"",state:l.isShown?!0:null},{default:u(()=>[m(n(i(a)("settingParam.type."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),s("div",Re,[s("div",ze,[s("button",{class:M(["btn",[V.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[9]||(e[9]=l=>N("compare"))},n(V.value.compare?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+n(i(a)("common.label.compare"))+" "+n(R.value),3)])]),s("div",Ne,[s("div",We,[s("button",{class:M(["btn",[i(p).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[10]||(e[10]=l=>i(p).switchCache())},n(i(p).isCacheEnabled.value?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+n(i(a)("common.label.localStorage")),3)])])])]),e[18]||(e[18]=s("div",null,null,-1)),s("div",qe,[c(i(X),{rows:z.value,columns:v.value,sortable:!0,cloneHeaderInFooter:!0,stickyFirstColumn:!0,search:C.value.search,page:C.value.page,pageSize:C.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:u(l=>[s("div",Ge,[s("button",{type:"button",class:M(["btn",[l.value._isCompare?"btn-success":"btn-secondary"]]),onClick:g=>G(l)},n(l.value._isCompare?"+":"-"),11,De)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[19]||(e[19]=s("div",{class:"card-footer clearfix"},[s("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{Xe as default};
