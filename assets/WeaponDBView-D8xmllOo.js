import{r as M,L as G,b as J,B as K,W as Q,_ as X,a as Y}from"./projectKeys-D6RBYZEP.js";import{u as Z,r as g,w as O,o as ee,c as T,a as b,b as l,d as m,t as n,e as r,f as c,g as i,R as te,h as le,v as oe,n as W,F as V,i as y,j as L}from"./index-DxqcEcR2.js";const ae=()=>M.get("/v1/weapons",{limit:500}),se={class:"app-content-header"},ie={class:"container-fluid"},ne={class:"row"},de={class:"col-sm-6"},re={class:"mb-0"},ce={class:"col-sm-6"},_e={class:"breadcrumb float-sm-end"},ue={class:"breadcrumb-item"},pe={class:"breadcrumb-item active","aria-current":"page"},we={class:"app-content"},me={class:"container-fluid"},he={class:"row"},ve={class:"col-lg-12"},fe={class:"card mb-4 mt-2"},be={class:"card-header p-2 pt-3 pb-0"},ye={class:"row"},Se={class:"col-lg-3"},Ce={class:"input-group mb-3"},ge=["placeholder"],Te={class:"col-lg-3"},xe={class:"container"},Ve={class:"row"},ze={class:"col-6"},Le={class:"row"},ke={class:"col-6"},We={class:"col-lg-3"},$e={class:"container"},Ue={class:"row"},Ee={class:"col-6"},Oe={class:"col-lg-3"},je={class:"container"},Ae={class:"row"},Be={class:"col-6"},Fe={class:"col-lg-3"},Re={class:"d-grid gap-2 mb-2"},Ne={class:"col-lg-3"},De={class:"d-grid gap-2 mb-2"},He={class:"card-body p-2"},Ie={class:"flex gap-4"},Pe=["onClick"],Je={__name:"WeaponDBView",setup(qe){const{t:a,locale:j}=Z(),_=new G(J),S=g({pageSize:20,page:1,search:""}),C=g({compare:!1}),d=g({col_common:!1,col_combat:!1,weapon_type:!0,weapon_size:!0}),u=g({}),x=g([]),h=g({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0}}),v=g({1:{size_id:1,isShown:!0},2:{size_id:2,isShown:!0},3:{size_id:3,isShown:!0}}),p=g([{field:"w_title_t",titleCode:"weapon.attr.w_title_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"w_id",titleCode:"weapon.attr.w_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"w_version_t",titleCode:"weapon.attr.w_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"w_mod_t",titleCode:"weapon.attr.w_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"w_type_t",titleCode:"weapon.attr.w_type_id",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_size_t",titleCode:"weapon.attr.w_size_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"w_role_t",titleCode:"weapon.attr.w_role_code",colType:"combat",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"w_damageType_t",titleCode:"weapon.attr.w_damage_type_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_op",titleCode:"weapon.attr.w_op",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_range",titleCode:"weapon.attr.w_range",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_damage",titleCode:"weapon.attr.w_damage",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_charges_ammo",titleCode:"weapon.attr.w_charges_ammo",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_sec_recharge",titleCode:"weapon.attr.w_sec_recharge",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_charges_gained",titleCode:"weapon.attr.w_charges_gained",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_refire_delay",titleCode:"weapon.attr.w_refire_delay",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_emp_burst_d",titleCode:"weapon.attr.w_emp_burst_d",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_burst_damage",titleCode:"weapon.attr.w_burst_damage",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_burst_dps",titleCode:"weapon.attr.w_burst_dps",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_sustained_dps",titleCode:"weapon.attr.w_sustained_dps",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_flux_burst",titleCode:"weapon.attr.w_flux_burst",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_burst_flux",titleCode:"weapon.attr.w_burst_flux",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_sustained_flux",titleCode:"weapon.attr.w_sustained_flux",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_flux_shot",titleCode:"weapon.attr.w_flux_shot",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_flux_non_emp_dmg",titleCode:"weapon.attr.w_flux_non_emp_dmg",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_acc_t",titleCode:"weapon.attr.w_acc_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_max_spread",titleCode:"weapon.attr.w_max_spread",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_turn_t",titleCode:"weapon.attr.w_turn_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_turn_rate_on_turets",titleCode:"weapon.attr.w_turn_rate_on_turets",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_projectile_missile_speed",titleCode:"weapon.attr.w_projectile_missile_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_missile_launch_speed",titleCode:"weapon.attr.w_missile_launch_speed",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_acceleration",titleCode:"weapon.attr.w_missile_acceleration",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_time_to_gain_max_speed",titleCode:"weapon.attr.w_time_to_gain_max_speed",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_speed_t",titleCode:"weapon.attr.w_speed_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_tracking_t",titleCode:"weapon.attr.w_tracking_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_missile_60_turn_time",titleCode:"weapon.attr.w_missile_60_turn_time",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_turn_rate",titleCode:"weapon.attr.w_missile_turn_rate",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_turn_acceleration",titleCode:"weapon.attr.w_missile_turn_acceleration",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_hp",titleCode:"weapon.attr.w_missile_hp",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_lifetime",titleCode:"weapon.attr.w_missile_lifetime",colType:"combat",title:"",type:"number",hide:!0,isShown:!1}]);O(j,()=>{U()}),ee(async()=>{x.value=await ae(),P(),_.loadLS(["showAll","params","compareList","rawCols","selectedWeaponType","selectedWeaponSize","filter_params"],{showAll:d,params:S,compareList:u,rawCols:p,selectedWeaponType:h,selectedWeaponSize:v,filter_params:C}),_.isCacheEnabled.value&&$(),U(),_.appReady.value=!0}),O([p,d,S,C,h,v,u],()=>{_.appReady.value&&!_.initialLoad.value&&_.saveLS({showAll:d.value,params:S.value,filter_params:C.value,rawCols:p.value,selectedWeaponType:h.value,selectedWeaponSize:v.value,compareList:u.value}),_.appReady.value&&(_.initialLoad.value=!1)},{deep:!0});const A=T(()=>p.value.filter(t=>t.colType==="common")),B=T(()=>p.value.filter(t=>t.colType==="combat")),F=T(()=>p.value.reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+p.value.length),R=T(()=>Object.values(h.value).reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+Object.keys(h.value).length),N=T(()=>Object.values(v.value).reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+Object.keys(v.value).length),D=T(()=>Object.values(u.value).reduce((e,s)=>e+(s?1:0),0)+"/"+x.value.length),H=T(()=>{let t=x.value.filter(e=>h.value[e.w_type_id].isShown).filter(e=>v.value[e.w_size_id].isShown);return C.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,w_version_t:a("game.version-list."+e.w_version_id),w_mod_t:a("game.mod-list."+e.w_mod_id),w_type_t:a("weapon.type."+e.w_type_id),w_role_t:a("weapon.role."+e.w_role_code),w_title_t:a("weapon.title."+e.w_title_code),w_size_t:a("weapon.size."+e.w_size_id),w_damageType_t:a("weapon.damageType."+e.w_damage_type_code),w_acc_t:a("weapon.accuracy."+e.w_acc_code),w_turn_t:a("weapon.turn."+e.w_turn_code),w_speed_t:a("weapon.speed."+e.w_speed_code),w_tracking_t:a("weapon.tracking."+e.w_tracking_code)}))}),I=t=>{$(),C.value[t]=!C.value[t]},$=()=>{x.value.forEach((t,e)=>{t._isCompare=!1,u.value[t._index]&&(t._isCompare=u.value[t._index])})},U=()=>{p.value.forEach(t=>{t.title=a(t.titleCode)})},E=t=>{t.hide=!t.isShown},z=t=>{const e=d.value[t];if(t.slice(0,4)==="col_"){const s=t.slice(4,99);p.value.forEach(f=>{f.colType===s&&(f.isShown=e,f.hide=!e)})}t==="weapon_type"&&Object.keys(h.value).forEach(s=>{const f=h.value[s];f.isShown=e}),t==="weapon_size"&&Object.keys(v.value).forEach(s=>{const f=v.value[s];f.isShown=e})},P=()=>{x.value.forEach((t,e)=>{t.w_version_t="",t.w_mod_t="",t.w_type_t="",t.w_role_t="",t.w_title_t="",t.w_defence_t="",t.w_op_info_t="",t._index=e,t._isCompare=!1})},q=t=>{t.value._isCompare=!t.value._isCompare,u.value[t.value._index]===void 0&&(u.value[t.value._index]=!1),u.value[t.value._index]=!u.value[t.value._index]};return(t,e)=>{const s=X,f=Y,k=K;return y(),b(V,null,[l("div",se,[l("div",ie,[l("div",ne,[l("div",de,[l("h3",re,[m(n(t.$t("view.weapon-db.title"))+" ",1),l("small",null,n(t.$t("view.weapon-db.version")),1)])]),l("div",ce,[l("ol",_e,[l("li",ue,[r(i(te),{to:"/"},{default:c(()=>e[11]||(e[11]=[m("Home")])),_:1})]),l("li",pe,n(t.$t("view.weapon-db.title")),1)])])])])]),l("div",we,[l("div",me,[l("div",he,[l("div",ve,[l("div",fe,[l("div",be,[l("div",ye,[l("div",Se,[l("div",Ce,[e[12]||(e[12]=l("span",{class:"input-group-text"},[l("i",{class:"bi bi-search"})],-1)),le(l("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>S.value.search=o),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,ge),[[oe,S.value.search]])])]),l("div",Te,[r(k,{text:i(a)("view.weapon-db.label_weaponColShown",{cnt:F.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",xe,[e[13]||(e[13]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:d.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=o=>d.value.col_common=o),e[2]||(e[2]=o=>z("col_common"))],switch:"",state:d.value.col_common?!0:null},{default:c(()=>[m(n(i(a)("view.weapon-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),l("div",Ve,[(y(!0),b(V,null,L(A.value,o=>(y(),b("div",ze,[r(s,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":[w=>o.isShown=w,w=>E(o)],switch:"",state:o.isShown?!0:null},{default:c(()=>[m(n(i(a)(o.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),r(f),r(s,{modelValue:d.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=o=>d.value.col_combat=o),e[4]||(e[4]=o=>z("col_combat"))],switch:"",state:d.value.col_combat?!0:null},{default:c(()=>[m(n(i(a)("view.weapon-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),l("div",Le,[(y(!0),b(V,null,L(B.value,o=>(y(),b("div",ke,[r(s,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":[w=>o.isShown=w,w=>E(o)],switch:"",state:o.isShown?!0:null},{default:c(()=>[m(n(i(a)(o.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",We,[r(k,{text:i(a)("view.weapon-db.label_weaponTypeShown",{cnt:R.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",$e,[e[14]||(e[14]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:d.value.weapon_type,"onUpdate:modelValue":[e[5]||(e[5]=o=>d.value.weapon_type=o),e[6]||(e[6]=o=>z("weapon_type"))],switch:"",state:d.value.weapon_type?!0:null},{default:c(()=>[m(n(i(a)("view.weapon-db.label_selectAllWeaponType")),1)]),_:1},8,["modelValue","state"]),l("div",Ue,[(y(!0),b(V,null,L(h.value,o=>(y(),b("div",Ee,[r(s,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":w=>o.isShown=w,switch:"",state:o.isShown?!0:null},{default:c(()=>[m(n(i(a)("weapon.type."+o.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",Oe,[r(k,{text:i(a)("view.weapon-db.label_weaponSizeShown",{cnt:N.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",je,[e[15]||(e[15]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:d.value.weapon_size,"onUpdate:modelValue":[e[7]||(e[7]=o=>d.value.weapon_size=o),e[8]||(e[8]=o=>z("weapon_size"))],switch:"",state:d.value.weapon_size?!0:null},{default:c(()=>[m(n(i(a)("view.weapon-db.label_selectAllWeaponSize")),1)]),_:1},8,["modelValue","state"]),l("div",Ae,[(y(!0),b(V,null,L(v.value,o=>(y(),b("div",Be,[r(s,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":w=>o.isShown=w,switch:"",state:o.isShown?!0:null},{default:c(()=>[m(n(i(a)("weapon.size."+o.size_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",Fe,[l("div",Re,[l("button",{class:W(["btn",[C.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[9]||(e[9]=o=>I("compare"))},n(C.value.compare?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+n(i(a)("common.label.compare"))+" "+n(D.value),3)])]),l("div",Ne,[l("div",De,[l("button",{class:W(["btn",[i(_).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[10]||(e[10]=o=>i(_).switchCache())},n(i(_).isCacheEnabled.value?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+n(i(a)("common.label.localStorage")),3)])])])]),e[16]||(e[16]=l("div",null,null,-1)),l("div",He,[r(i(Q),{rows:H.value,columns:p.value,sortable:!0,cloneHeaderInFooter:!0,stickyFirstColumn:!0,search:S.value.search,page:S.value.page,pageSize:S.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:c(o=>[l("div",Ie,[l("button",{type:"button",class:W(["btn",[o.value._isCompare?"btn-success":"btn-secondary"]]),onClick:w=>q(o)},n(o.value._isCompare?"+":"-"),11,Pe)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[17]||(e[17]=l("div",{class:"card-footer clearfix"},[l("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{Je as default};
