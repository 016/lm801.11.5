import{r as X,L as Y,S as Z,B as ee,W as te,_ as se,a as le}from"./projectKeys-B-vQxtHj.js";import{u as oe,r as T,w as B,o as ie,c as V,a as v,b as o,d as m,t as n,e as c,f as _,g as a,R as ae,h as de,v as ne,n as $,F as x,i as w,j as E}from"./index-tudlg7Or.js";const re=()=>X.get("/v1/ships",{limit:500}),ce={class:"app-content-header"},_e={class:"container-fluid"},ue={class:"row"},pe={class:"col-sm-6"},me={class:"mb-0"},he={class:"col-sm-6"},fe={class:"breadcrumb float-sm-end"},ve={class:"breadcrumb-item"},we={class:"breadcrumb-item active","aria-current":"page"},be={class:"app-content"},ye={class:"container-fluid"},Se={class:"row"},Ce={class:"col-lg-12"},ge={class:"card mb-4 mt-2"},Te={class:"card-header p-2 pt-3 pb-0"},Ve={class:"row"},xe={class:"col-lg-3"},ke={class:"input-group mb-3"},Le=["placeholder"],Ee={class:"col-lg-3"},Ue={class:"container"},$e={class:"row"},Ae={class:"col-6"},ze={class:"row"},Be={class:"col-6"},Oe={class:"row"},Fe={class:"col-6"},je={class:"col-lg-3"},We={class:"container"},Re={class:"row"},He={class:"col-6"},De={class:"col-lg-3"},Ie={class:"container"},Ne={class:"row"},Pe={class:"col-6"},qe={class:"col-lg-3"},Me={class:"d-grid gap-2 mb-2"},Ge={class:"col-lg-3"},Je={class:"d-grid gap-2 mb-2"},Ke={class:"card-body p-2"},Qe={class:"flex gap-4"},Xe=["onClick"],tt={__name:"ShipDBView",setup(Ye){const{t:i,locale:O}=oe(),h=new Y(Z),g=T({pageSize:20,page:1,search:""}),u=T({compare:!1,ship_slot:!1}),r=T({col_common:!1,col_combat:!1,col_logi:!1,ship_type:!0,ship_slot:!1}),b=T({}),k=T([]),y=T({1:{type_id:1,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0},31:{type_id:31,isShown:!0}}),S=T([]),f=T([{field:"s_title_t",titleCode:"ship.attr.s_title_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"s_id",titleCode:"ship.attr.s_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"s_version_t",titleCode:"ship.attr.s_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"s_mod_t",titleCode:"ship.attr.s_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"s_type_t",titleCode:"ship.attr.s_type_id",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_role_t",titleCode:"ship.attr.s_role_code",colType:"combat",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"s_sys_t",titleCode:"ship.attr.s_sys_code",colType:"combat",title:"",minWidth:"110px",hide:!1,isShown:!0},{field:"s_op_info_t",titleCode:"ship.attr.s_op_info",colType:"combat",title:"",minWidth:"160px",hide:!1,isShown:!0},{field:"s_dp",titleCode:"ship.attr.s_dp",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_op",titleCode:"ship.attr.s_op",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_defence_t",titleCode:"ship.attr.s_defence_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_speed",titleCode:"ship.attr.s_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_flux",titleCode:"ship.attr.s_flux",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_flux_dis",titleCode:"ship.attr.s_flux_dis",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_hull",titleCode:"ship.attr.s_hull",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_armor",titleCode:"ship.attr.s_armor",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_fd",titleCode:"ship.attr.s_fd",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_effective_shield",titleCode:"ship.attr.s_effective_shield",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_arc",titleCode:"ship.attr.s_shield_arc",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_upkeep",titleCode:"ship.attr.s_shield_upkeep",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_rate",titleCode:"ship.attr.s_shield_rate",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cloak_activation",titleCode:"ship.attr.s_cloak_activation",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cloak_upkeep",titleCode:"ship.attr.s_cloak_upkeep",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_is_civ_t",titleCode:"ship.attr.s_is_civ",colType:"logi",title:"",hide:!0,isShown:!1},{field:"s_peak",titleCode:"ship.attr.s_peak",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_maintenance",titleCode:"ship.attr.s_maintenance",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cr_depl",titleCode:"ship.attr.s_cr_depl",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cr_recovery_rate",titleCode:"ship.attr.s_cr_recovery_rate",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cr_recovery_cost",titleCode:"ship.attr.s_cr_recovery_cost",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cargo",titleCode:"ship.attr.s_cargo",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_crew",titleCode:"ship.attr.s_crew",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_crew_need",titleCode:"ship.attr.s_crew_need",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_fuel",titleCode:"ship.attr.s_fuel",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_max_burn",titleCode:"ship.attr.s_max_burn",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_jump_cost",titleCode:"ship.attr.s_jump_cost",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_sensor_profile",titleCode:"ship.attr.s_sensor_profile",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_sensor_strength",titleCode:"ship.attr.s_sensor_strength",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_ofp",titleCode:"ship.attr.s_ofp",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_wfg",titleCode:"ship.attr.s_wfg",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_op_balance",titleCode:"ship.attr.s_op_balance",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_fighter_op",titleCode:"ship.attr.s_fighter_op",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_flight_decks",titleCode:"ship.attr.s_flight_decks",colType:"logi",title:"",type:"number",hide:!0,isShown:!1}]);B(O,()=>{z()}),ie(async()=>{k.value=await re(),M(),P(),h.loadLS(["showAll","params","compareList","rawCols","selectedShipSlot","selectedShipType","filter_params"],{showAll:r,params:g,compareList:b,rawCols:f,selectedShipSlot:S,selectedShipType:y,filter_params:u}),h.isCacheEnabled.value&&A(),z(),h.appReady.value=!0}),B([f,r,g,u,S,y,b],()=>{h.appReady.value&&!h.initialLoad.value&&h.saveLS({showAll:r.value,params:g.value,filter_params:u.value,rawCols:f.value,selectedShipSlot:S.value,selectedShipType:y.value,compareList:b.value}),h.appReady.value&&(h.initialLoad.value=!1)},{deep:!0});const F=V(()=>f.value.filter(t=>t.colType==="common")),j=V(()=>f.value.filter(t=>t.colType==="combat")),W=V(()=>f.value.filter(t=>t.colType==="logi")),R=V(()=>f.value.reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+f.value.length),H=V(()=>Object.values(y.value).reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+Object.keys(y.value).length),D=V(()=>S.value.reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+S.value.length),I=V(()=>Object.values(b.value).reduce((e,s)=>e+(s?1:0),0)+"/"+k.value.length),N=V(()=>{const t=[];S.value.forEach(s=>{s.isShown&&t.push(s.sizeCode+s.typeCode)});let e=k.value.filter(s=>y.value[s.s_type_id].isShown);return u.value.ship_slot&&(e=e.filter(s=>t.some(d=>s["s_m_"+d]>0))),u.value.compare&&(e=e.filter(s=>s._isCompare)),e.map(s=>({...s,s_version_t:i("game.version-list."+s.s_version_id),s_mod_t:i("game.mod-list."+s.s_mod_id),s_type_t:i("ship.type."+s.s_type_id),s_role_t:i("ship.role."+s.s_role_code),s_title_t:i("ship.title."+s.s_title_code),s_defence_t:i("ship.sys."+s.s_defence_code),s_sys_t:i("ship.sys."+s.s_sys_code),s_is_civ_t:i("common.yesno."+s.s_is_civ),s_op_info_t:K(s.s_op_info_code,s.s_op_info_add_code)}))}),P=()=>{const t=["s","m","l"],e=["b","m","e","s","u","h","c"];t.forEach(s=>{e.forEach(d=>{S.value.push({sizeCode:s,typeCode:d,isShown:!1})})})},q=t=>{A(),u.value[t]=!u.value[t]},A=()=>{k.value.forEach((t,e)=>{t._isCompare=!1,b.value[t._index]&&(t._isCompare=b.value[t._index])})},z=()=>{f.value.forEach(t=>{t.title=i(t.titleCode)})},U=t=>{t.hide=!t.isShown},L=t=>{const e=r.value[t];if(t.slice(0,4)==="col_"){const s=t.slice(4,99);f.value.forEach(d=>{d.colType===s&&(d.isShown=e,d.hide=!e)})}t==="ship_type"&&Object.keys(y.value).forEach(s=>{const d=y.value[s];d.isShown=e}),t==="ship_slot"&&S.value.forEach(s=>{s.isShown=e})},M=()=>{k.value.forEach((t,e)=>{t.s_version_t="",t.s_mod_t="",t.s_type_t="",t.s_role_t="",t.s_title_t="",t.s_defence_t="",t.s_op_info_t="",t.s_op_info_code=G(t),t.s_op_info_add_code=J(t),t._index=e,t._isCompare=!1})},G=t=>{const e=["s_m_sm","s_m_mm","s_m_lm","s_m_se","s_m_me","s_m_le","s_m_sb","s_m_mb","s_m_lb","s_m_su","s_m_mu","s_m_lu","s_m_sh","s_m_mh","s_m_lh","s_m_sc","s_m_mc","s_m_lc","s_m_ss","s_m_ms","s_m_ls"];let s="";return e.forEach(d=>{t[d]>0&&(s.length>0&&(s+="+"),s+=d.substring(4,6)+"x"+t[d])}),s},J=t=>{const e=["s_m1","s_m2","s_m3","s_m4"];let s="";return e.forEach(d=>{t[d]!==null&&t[d].length>0&&(s.length>0&&(s+="+"),s+=t[d]+"x-x"+t[d+"_cnt"])}),s},K=(t,e)=>{let s="";return t.length>0&&t.split("+").forEach(C=>{s.length>0&&(s+=". "),s+=i("weapon.size."+C.slice(0,1))+i("weapon.type."+C.slice(1,2))+C.slice(2)}),e.length>0&&e.split("+").forEach(C=>{s.length>0&&(s+=". ");const l=C.split("x-x");s+=i(l[0])+"x"+l[1]}),s.length<1&&(s="-"),s},Q=t=>{t.value._isCompare=!t.value._isCompare,b.value[t.value._index]===void 0&&(b.value[t.value._index]=!1),b.value[t.value._index]=!b.value[t.value._index]};return(t,e)=>{const s=se,d=le,C=ee;return w(),v(x,null,[o("div",ce,[o("div",_e,[o("div",ue,[o("div",pe,[o("h3",me,[m(n(t.$t("view.ship-db.title"))+" ",1),o("small",null,n(t.$t("view.ship-db.version")),1)])]),o("div",he,[o("ol",fe,[o("li",ve,[c(a(ae),{to:"/"},{default:_(()=>e[14]||(e[14]=[m("Home")])),_:1})]),o("li",we,n(t.$t("view.ship-db.title")),1)])])])])]),o("div",be,[o("div",ye,[o("div",Se,[o("div",Ce,[o("div",ge,[o("div",Te,[o("div",Ve,[o("div",xe,[o("div",ke,[e[15]||(e[15]=o("span",{class:"input-group-text"},[o("i",{class:"bi bi-search"})],-1)),de(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>g.value.search=l),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,Le),[[ne,g.value.search]])])]),o("div",Ee,[c(C,{text:a(i)("view.ship-db.label_shipColShown",{cnt:R.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:_(()=>[o("div",Ue,[e[16]||(e[16]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(s,{modelValue:r.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=l=>r.value.col_common=l),e[2]||(e[2]=l=>L("col_common"))],switch:"",state:r.value.col_common?!0:null},{default:_(()=>[m(n(a(i)("view.ship-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),o("div",$e,[(w(!0),v(x,null,E(F.value,l=>(w(),v("div",Ae,[c(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[p=>l.isShown=p,p=>U(l)],switch:"",state:l.isShown?!0:null},{default:_(()=>[m(n(a(i)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),c(d),c(s,{modelValue:r.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=l=>r.value.col_combat=l),e[4]||(e[4]=l=>L("col_combat"))],switch:"",state:r.value.col_combat?!0:null},{default:_(()=>[m(n(a(i)("view.ship-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),o("div",ze,[(w(!0),v(x,null,E(j.value,l=>(w(),v("div",Be,[c(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[p=>l.isShown=p,p=>U(l)],switch:"",state:l.isShown?!0:null},{default:_(()=>[m(n(a(i)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),c(d),c(s,{modelValue:r.value.col_logi,"onUpdate:modelValue":[e[5]||(e[5]=l=>r.value.col_logi=l),e[6]||(e[6]=l=>L("col_logi"))],switch:"",state:r.value.col_logi?!0:null},{default:_(()=>[m(n(a(i)("view.ship-db.label_selectAllLogiCol")),1)]),_:1},8,["modelValue","state"]),o("div",Oe,[(w(!0),v(x,null,E(W.value,l=>(w(),v("div",Fe,[c(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[p=>l.isShown=p,p=>U(l)],switch:"",state:l.isShown?!0:null},{default:_(()=>[m(n(a(i)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",je,[c(C,{text:a(i)("view.ship-db.label_shipTypeShown",{cnt:H.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:_(()=>[o("div",We,[e[17]||(e[17]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(s,{modelValue:r.value.ship_type,"onUpdate:modelValue":[e[7]||(e[7]=l=>r.value.ship_type=l),e[8]||(e[8]=l=>L("ship_type"))],switch:"",state:r.value.ship_type?!0:null},{default:_(()=>[m(n(a(i)("view.ship-db.label_selectAllShipType")),1)]),_:1},8,["modelValue","state"]),o("div",Re,[(w(!0),v(x,null,E(y.value,l=>(w(),v("div",He,[c(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":p=>l.isShown=p,switch:"",state:l.isShown?!0:null},{default:_(()=>[m(n(a(i)("ship.type."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",De,[c(C,{text:(u.value.ship_slot?a(i)("common.label.on"):a(i)("common.label.off"))+"-"+a(i)("view.ship-db.label_shipSlotShown",{cnt:D.value}),variant:u.value.ship_slot?"primary":"outline-primary",class:"d-grid","auto-close":"outside"},{default:_(()=>[o("div",Ie,[e[18]||(e[18]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),c(s,{modelValue:u.value.ship_slot,"onUpdate:modelValue":e[9]||(e[9]=l=>u.value.ship_slot=l),switch:"",state:u.value.ship_slot?!0:null},{default:_(()=>[m(n(a(i)("view.ship-db.label_shipSlotFilterActive")),1)]),_:1},8,["modelValue","state"]),c(d),c(s,{modelValue:r.value.ship_slot,"onUpdate:modelValue":[e[10]||(e[10]=l=>r.value.ship_slot=l),e[11]||(e[11]=l=>L("ship_slot"))],switch:"",state:r.value.ship_slot?!0:null},{default:_(()=>[m(n(a(i)("view.ship-db.label_selectAllShipSlot")),1)]),_:1},8,["modelValue","state"]),o("div",Ne,[(w(!0),v(x,null,E(S.value,l=>(w(),v("div",Pe,[c(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":p=>l.isShown=p,switch:"",state:l.isShown?!0:null},{default:_(()=>[m(n(a(i)("weapon.size."+l.sizeCode))+n(a(i)("weapon.type."+l.typeCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text","variant"])]),o("div",qe,[o("div",Me,[o("button",{class:$(["btn",[u.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[12]||(e[12]=l=>q("compare"))},n(u.value.compare?a(i)("common.label.on"):a(i)("common.label.off"))+"-"+n(a(i)("common.label.compare"))+" "+n(I.value),3)])]),o("div",Ge,[o("div",Je,[o("button",{class:$(["btn",[a(h).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[13]||(e[13]=l=>a(h).switchCache())},n(a(h).isCacheEnabled.value?a(i)("common.label.on"):a(i)("common.label.off"))+"-"+n(a(i)("common.label.localStorage")),3)])])])]),e[19]||(e[19]=o("div",null,null,-1)),o("div",Ke,[c(a(te),{rows:N.value,columns:f.value,sortable:!0,cloneHeaderInFooter:!0,stickyFirstColumn:!0,search:g.value.search,page:g.value.page,pageSize:g.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:_(l=>[o("div",Qe,[o("button",{type:"button",class:$(["btn",[l.value._isCompare?"btn-success":"btn-secondary"]]),onClick:p=>Q(l)},n(l.value._isCompare?"+":"-"),11,Xe)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[20]||(e[20]=o("div",{class:"card-footer clearfix"},[o("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{tt as default};
