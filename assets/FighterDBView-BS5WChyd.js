import{r as G,L as J,F as K,B as Q,W as X,_ as Y}from"./projectKeys-Doi7nMs1.js";import{_ as Z}from"./BDropdownText.vue_vue_type_script_setup_true_lang-zF-Eo35m-DU8sS4BB.js";import{u as ee,r as C,w as O,o as te,c as T,a as y,b as l,d as f,t as n,e as d,f as c,g as a,R as le,h as oe,v as se,n as U,F as x,i as b,j as L}from"./index-C-q8VZuF.js";const ie=()=>G.get("/v1/fighters",{limit:500}),ae={class:"app-content-header"},ne={class:"container-fluid"},re={class:"row"},de={class:"col-sm-6"},ce={class:"mb-0"},ue={class:"col-sm-6"},_e={class:"breadcrumb float-sm-end"},me={class:"breadcrumb-item"},pe={class:"breadcrumb-item active","aria-current":"page"},fe={class:"app-content"},he={class:"container-fluid"},ve={class:"row"},we={class:"col-lg-12"},ye={class:"card mb-4 mt-2"},be={class:"card-header p-2 pt-3 pb-0"},ge={class:"row"},Se={class:"col-lg-3"},Ce={class:"input-group mb-3"},Te=["placeholder"],Ve={class:"col-lg-3"},xe={class:"container"},Fe={class:"row"},Le={class:"col-6"},$e={class:"row"},Ue={class:"col-6"},ke={class:"col-lg-3"},Ee={class:"container"},Be={class:"row"},Oe={class:"col-6"},Ae={class:"col-lg-3"},je={class:"container"},De={class:"row"},Re={class:"col-6"},Ie={class:"col-lg-3"},We={class:"d-grid gap-2 mb-2"},ze={class:"col-lg-3"},He={class:"d-grid gap-2 mb-2"},Ne={class:"card-body p-2"},qe={class:"flex gap-4"},Me=["onClick"],Qe={__name:"FighterDBView",setup(Pe){const{t:s,locale:A}=ee(),u=new J(K),g=C({pageSize:20,page:1,search:""}),S=C({compare:!1}),r=C({col_common:!1,col_combat:!1,fighter_type:!0,fighter_design_type:!0}),_=C({}),V=C([]),h=C({1:{type_id:1,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0},31:{type_id:31,isShown:!0}}),v=C({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0},11:{type_id:11,isShown:!0}}),m=C([{field:"f_title_t",titleCode:"fighter.attr.f_title_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"f_id",titleCode:"fighter.attr.f_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"f_version_t",titleCode:"fighter.attr.f_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"f_mod_t",titleCode:"fighter.attr.f_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"f_type_t",titleCode:"fighter.attr.f_type_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"f_role_t",titleCode:"fighter.attr.f_role_code",colType:"common",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"f_design_type_t",titleCode:"fighter.attr.f_design_type_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"f_system_t",titleCode:"fighter.attr.f_system_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"f_weapon_t",titleCode:"fighter.attr.f_weapon",colType:"combat",title:"",hide:!1,isShown:!0},{field:"f_op",titleCode:"fighter.attr.f_op",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_range",titleCode:"fighter.attr.f_range",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_speed",titleCode:"fighter.attr.f_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_hull",titleCode:"fighter.attr.f_hull",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_armor",titleCode:"fighter.attr.f_armor",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_shield",titleCode:"fighter.attr.f_shield",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_unman",titleCode:"fighter.attr.f_unman",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"f_crew_per_fighter",titleCode:"fighter.attr.f_crew_per_fighter",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_fighters_in_wing",titleCode:"fighter.attr.f_fighters_in_wing",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"f_brt",titleCode:"fighter.attr.f_brt",colType:"combat",title:"",type:"number",hide:!0,isShown:!1}]);O(A,()=>{E()}),te(async()=>{V.value=await ie(),q(),u.loadLS(["showAll","params","compareList","rawCols","selectedFighterType","selectedFighterDesignType","filter_params"],{showAll:r,params:g,compareList:_,rawCols:m,selectedFighterType:h,selectedFighterDesignType:v,filter_params:S}),u.isCacheEnabled.value&&k(),E(),u.appReady.value=!0}),O([m,r,g,S,h,v,_],()=>{u.appReady.value&&!u.initialLoad.value&&u.saveLS({showAll:r.value,params:g.value,filter_params:S.value,rawCols:m.value,selectedFighterType:h.value,selectedFighterDesignType:v.value,compareList:_.value}),u.appReady.value&&(u.initialLoad.value=!1)},{deep:!0});const j=T(()=>m.value.filter(t=>t.colType==="common")),D=T(()=>m.value.filter(t=>t.colType==="combat")),R=T(()=>m.value.reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+m.value.length),I=T(()=>Object.values(h.value).reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+Object.keys(h.value).length),W=T(()=>Object.values(v.value).reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+Object.keys(v.value).length),z=T(()=>Object.values(_.value).reduce((e,i)=>e+(i?1:0),0)+"/"+V.value.length),H=T(()=>{let t=V.value.filter(e=>h.value[e.f_type_id].isShown).filter(e=>v.value[e.f_design_type_id].isShown);return S.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,f_version_t:s("game.version-list."+e.f_version_id),f_mod_t:s("game.mod-list."+e.f_mod_id),f_type_t:s("fighter.type."+e.f_type_id),f_role_t:s("fighter.role."+e.f_role_code),f_title_t:s("fighter.title."+e.f_title_code),f_design_type_t:s("fighter.design_type."+e.f_design_type_id),f_system_t:s("ship.sys.title."+e.f_system_code),f_weapon_t:M(e)}))}),N=t=>{k(),S.value[t]=!S.value[t]},k=()=>{V.value.forEach((t,e)=>{t._isCompare=!1,_.value[t._index]&&(t._isCompare=_.value[t._index])})},E=()=>{m.value.forEach(t=>{t.title=s(t.titleCode)})},B=t=>{t.hide=!t.isShown},F=t=>{const e=r.value[t];if(t.slice(0,4)==="col_"){const i=t.slice(4,99);m.value.forEach(w=>{w.colType===i&&(w.isShown=e,w.hide=!e)})}t==="fighter_type"&&Object.keys(h.value).forEach(i=>{const w=h.value[i];w.isShown=e}),t==="fighter_design_type"&&Object.keys(v.value).forEach(i=>{const w=v.value[i];w.isShown=e})},q=()=>{V.value.forEach((t,e)=>{t.f_version_t="",t.f_mod_t="",t.f_type_t="",t.f_role_t="",t.f_title_t="",t.f_design_type_t="",t.f_system_t="",t.f_weapon_t="",t._index=e,t._isCompare=!1})},M=t=>{let e="";return t.f_arm_1&&(e!=""&&(e+=","),e+=s("weapon.title."+t.f_arm_1)+"x"+t.f_arm_1_cnt),e},P=t=>{t.value._isCompare=!t.value._isCompare,_.value[t.value._index]===void 0&&(_.value[t.value._index]=!1),_.value[t.value._index]=!_.value[t.value._index]};return(t,e)=>{const i=Y,w=Z,$=Q;return b(),y(x,null,[l("div",ae,[l("div",ne,[l("div",re,[l("div",de,[l("h3",ce,[f(n(t.$t("view.fighter-db.title"))+" ",1),l("small",null,n(t.$t("view.fighter-db.version")),1)])]),l("div",ue,[l("ol",_e,[l("li",me,[d(a(le),{to:"/"},{default:c(()=>e[11]||(e[11]=[f("Home")])),_:1})]),l("li",pe,n(t.$t("view.fighter-db.title")),1)])])])])]),l("div",fe,[l("div",he,[l("div",ve,[l("div",we,[l("div",ye,[l("div",be,[l("div",ge,[l("div",Se,[l("div",Ce,[e[12]||(e[12]=l("span",{class:"input-group-text"},[l("i",{class:"bi bi-search"})],-1)),oe(l("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>g.value.search=o),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,Te),[[se,g.value.search]])])]),l("div",Ve,[d($,{text:a(s)("view.fighter-db.label_fighterColShown",{cnt:R.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",xe,[e[13]||(e[13]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),d(i,{modelValue:r.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=o=>r.value.col_common=o),e[2]||(e[2]=o=>F("col_common"))],switch:"",state:r.value.col_common?!0:null},{default:c(()=>[f(n(a(s)("view.fighter-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),l("div",Fe,[(b(!0),y(x,null,L(j.value,o=>(b(),y("div",Le,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":[p=>o.isShown=p,p=>B(o)],switch:"",state:o.isShown?!0:null},{default:c(()=>[f(n(a(s)(o.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),d(w),d(i,{modelValue:r.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=o=>r.value.col_combat=o),e[4]||(e[4]=o=>F("col_combat"))],switch:"",state:r.value.col_combat?!0:null},{default:c(()=>[f(n(a(s)("view.fighter-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),l("div",$e,[(b(!0),y(x,null,L(D.value,o=>(b(),y("div",Ue,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":[p=>o.isShown=p,p=>B(o)],switch:"",state:o.isShown?!0:null},{default:c(()=>[f(n(a(s)(o.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",ke,[d($,{text:a(s)("view.fighter-db.label_fighterTypeShown",{cnt:I.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",Ee,[e[14]||(e[14]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),d(i,{modelValue:r.value.fighter_type,"onUpdate:modelValue":[e[5]||(e[5]=o=>r.value.fighter_type=o),e[6]||(e[6]=o=>F("fighter_type"))],switch:"",state:r.value.fighter_type?!0:null},{default:c(()=>[f(n(a(s)("view.fighter-db.label_selectAllFighterType")),1)]),_:1},8,["modelValue","state"]),l("div",Be,[(b(!0),y(x,null,L(h.value,o=>(b(),y("div",Oe,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":p=>o.isShown=p,switch:"",state:o.isShown?!0:null},{default:c(()=>[f(n(a(s)("fighter.type."+o.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",Ae,[d($,{text:a(s)("view.fighter-db.label_fighterDesignTypeShown",{cnt:W.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",je,[e[15]||(e[15]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),d(i,{modelValue:r.value.fighter_design_type,"onUpdate:modelValue":[e[7]||(e[7]=o=>r.value.fighter_design_type=o),e[8]||(e[8]=o=>F("fighter_design_type"))],switch:"",state:r.value.fighter_design_type?!0:null},{default:c(()=>[f(n(a(s)("view.fighter-db.label_selectAllFighterDesignType")),1)]),_:1},8,["modelValue","state"]),l("div",De,[(b(!0),y(x,null,L(v.value,o=>(b(),y("div",Re,[d(i,{class:"ms-2",modelValue:o.isShown,"onUpdate:modelValue":p=>o.isShown=p,switch:"",state:o.isShown?!0:null},{default:c(()=>[f(n(a(s)("fighter.design_type."+o.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",Ie,[l("div",We,[l("button",{class:U(["btn",[S.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[9]||(e[9]=o=>N("compare"))},n(S.value.compare?a(s)("common.label.on"):a(s)("common.label.off"))+"-"+n(a(s)("common.label.compare"))+" "+n(z.value),3)])]),l("div",ze,[l("div",He,[l("button",{class:U(["btn",[a(u).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[10]||(e[10]=o=>a(u).switchCache())},n(a(u).isCacheEnabled.value?a(s)("common.label.on"):a(s)("common.label.off"))+"-"+n(a(s)("common.label.localStorage")),3)])])])]),e[16]||(e[16]=l("div",null,null,-1)),l("div",Ne,[d(a(X),{rows:H.value,columns:m.value,sortable:!0,cloneHeaderInFooter:!0,stickyFirstColumn:!0,search:g.value.search,page:g.value.page,pageSize:g.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:c(o=>[l("div",qe,[l("button",{type:"button",class:U(["btn",[o.value._isCompare?"btn-success":"btn-secondary"]]),onClick:p=>P(o)},n(o.value._isCompare?"+":"-"),11,Me)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[17]||(e[17]=l("div",{class:"card-footer clearfix"},[l("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{Qe as default};
