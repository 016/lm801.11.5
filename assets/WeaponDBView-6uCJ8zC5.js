import{r as M,L as G,b as J,B as K,W as Q,_ as X,a as Y}from"./projectKeys-2vSwfoFk.js";import{u as Z,r as C,w as O,o as ee,c as T,a as f,b as o,t as d,d as te,v as oe,e as r,f as c,g as i,n as W,F as V,h as b,i as g,j as k}from"./index-D534md0n.js";const le=()=>M.get("/v1/weapons",{limit:500}),ae={class:"app-content-header"},se={class:"container-fluid"},ie={class:"row"},ne={class:"col-sm-6"},de={class:"mb-0"},re={class:"col-sm-6"},ce={class:"breadcrumb float-sm-end"},_e={class:"breadcrumb-item active","aria-current":"page"},ue={class:"app-content"},pe={class:"container-fluid"},we={class:"row"},me={class:"col-lg-12"},he={class:"card mb-4 mt-2"},ve={class:"card-header p-2 pt-3 pb-0"},fe={class:"row"},be={class:"col-lg-3"},ye={class:"input-group mb-3"},Se=["placeholder"],Ce={class:"col-lg-3"},ge={class:"container"},Te={class:"row"},xe={class:"col-6"},Ve={class:"row"},ze={class:"col-6"},ke={class:"col-lg-3"},Le={class:"container"},We={class:"row"},Ue={class:"col-6"},$e={class:"col-lg-3"},Ee={class:"container"},Oe={class:"row"},je={class:"col-6"},Ae={class:"col-lg-3"},Be={class:"d-grid gap-2 mb-2"},Fe={class:"col-lg-3"},Ne={class:"d-grid gap-2 mb-2"},Re={class:"card-body p-2"},De={class:"flex gap-4"},He=["onClick"],Me={__name:"WeaponDBView",setup(Ie){const{t:a,locale:j}=Z(),_=new G(J),y=C({pageSize:20,page:2,search:""}),S=C({compare:!1}),n=C({col_common:!1,col_combat:!1,weapon_type:!0,weapon_size:!0}),u=C({}),x=C([]),m=C({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0}}),h=C({1:{size_id:1,isShown:!0},2:{size_id:2,isShown:!0},3:{size_id:3,isShown:!0}}),p=C([{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"w_id",titleCode:"weapon.attr.w_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"w_title_t",titleCode:"weapon.attr.w_title_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"w_version_t",titleCode:"weapon.attr.w_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"w_mod_t",titleCode:"weapon.attr.w_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"w_type_t",titleCode:"weapon.attr.w_type_id",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_size_t",titleCode:"weapon.attr.w_size_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"w_role_t",titleCode:"weapon.attr.w_role_code",colType:"combat",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"w_damageType_t",titleCode:"weapon.attr.w_damage_type_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_op",titleCode:"weapon.attr.w_op",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_range",titleCode:"weapon.attr.w_range",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_damage",titleCode:"weapon.attr.w_damage",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_charges_ammo",titleCode:"weapon.attr.w_charges_ammo",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_sec_recharge",titleCode:"weapon.attr.w_sec_recharge",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_charges_gained",titleCode:"weapon.attr.w_charges_gained",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_refire_delay",titleCode:"weapon.attr.w_refire_delay",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_emp_burst_d",titleCode:"weapon.attr.w_emp_burst_d",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_burst_damage",titleCode:"weapon.attr.w_burst_damage",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_burst_dps",titleCode:"weapon.attr.w_burst_dps",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_sustained_dps",titleCode:"weapon.attr.w_sustained_dps",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_flux_burst",titleCode:"weapon.attr.w_flux_burst",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_burst_flux",titleCode:"weapon.attr.w_burst_flux",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_sustained_flux",titleCode:"weapon.attr.w_sustained_flux",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_flux_shot",titleCode:"weapon.attr.w_flux_shot",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_flux_non_emp_dmg",titleCode:"weapon.attr.w_flux_non_emp_dmg",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_acc_t",titleCode:"weapon.attr.w_acc_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_max_spread",titleCode:"weapon.attr.w_max_spread",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_turn_t",titleCode:"weapon.attr.w_turn_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_turn_rate_on_turets",titleCode:"weapon.attr.w_turn_rate_on_turets",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_projectile_missile_speed",titleCode:"weapon.attr.w_projectile_missile_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_missile_launch_speed",titleCode:"weapon.attr.w_missile_launch_speed",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_acceleration",titleCode:"weapon.attr.w_missile_acceleration",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_time_to_gain_max_speed",titleCode:"weapon.attr.w_time_to_gain_max_speed",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_speed_t",titleCode:"weapon.attr.w_speed_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_tracking_t",titleCode:"weapon.attr.w_tracking_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_missile_60_turn_time",titleCode:"weapon.attr.w_missile_60_turn_time",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_turn_rate",titleCode:"weapon.attr.w_missile_turn_rate",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_turn_acceleration",titleCode:"weapon.attr.w_missile_turn_acceleration",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_hp",titleCode:"weapon.attr.w_missile_hp",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_lifetime",titleCode:"weapon.attr.w_missile_lifetime",colType:"combat",title:"",type:"number",hide:!0,isShown:!1}]);O(j,()=>{$()}),ee(async()=>{x.value=await le(),P(),_.loadLS(["showAll","params","compareList","rawCols","selectedWeaponType","selectedWeaponSize","filter_params"],{showAll:n,params:y,compareList:u,rawCols:p,selectedWeaponType:m,selectedWeaponSize:h,filter_params:S}),_.isCacheEnabled.value&&U(),$(),_.appReady.value=!0}),O([p,n,y,S,m,h,u],()=>{console.log("watch working.1"),_.appReady.value&&!_.initialLoad.value&&(console.log("watch working.2"),_.saveLS({showAll:n.value,params:y.value,filter_params:S.value,rawCols:p.value,selectedWeaponType:m.value,selectedWeaponSize:h.value,compareList:u.value})),_.appReady.value&&(_.initialLoad.value=!1)},{deep:!0});const A=T(()=>p.value.filter(t=>t.colType==="common")),B=T(()=>p.value.filter(t=>t.colType==="combat")),F=T(()=>p.value.reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+p.value.length),N=T(()=>Object.values(m.value).reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+Object.keys(m.value).length),R=T(()=>Object.values(h.value).reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+Object.keys(h.value).length),D=T(()=>Object.values(u.value).reduce((e,s)=>e+(s?1:0),0)+"/"+x.value.length),H=T(()=>{let t=x.value.filter(e=>m.value[e.w_type_id].isShown).filter(e=>h.value[e.w_size_id].isShown);return S.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,w_version_t:a("game.version-list."+e.w_version_id),w_mod_t:a("game.mod-list."+e.w_mod_id),w_type_t:a("weapon.type."+e.w_type_id),w_role_t:a("weapon.role."+e.w_role_code),w_title_t:a("weapon.title."+e.w_title_code),w_size_t:a("weapon.size."+e.w_size_id),w_damageType_t:a("weapon.damageType."+e.w_damage_type_code),w_acc_t:a("weapon.accuracy."+e.w_acc_code),w_turn_t:a("weapon.turn."+e.w_turn_code),w_speed_t:a("weapon.speed."+e.w_speed_code),w_tracking_t:a("weapon.tracking."+e.w_tracking_code)}))}),I=t=>{U(),S.value[t]=!S.value[t]},U=()=>{x.value.forEach((t,e)=>{t._isCompare=!1,u.value[t._index]&&(t._isCompare=u.value[t._index])})},$=()=>{p.value.forEach(t=>{t.title=a(t.titleCode)})},E=t=>{t.hide=!t.isShown},z=t=>{const e=n.value[t];if(t.slice(0,4)==="col_"){const s=t.slice(4,99);p.value.forEach(v=>{v.colType===s&&(v.isShown=e,v.hide=!e)})}t==="weapon_type"&&Object.keys(m.value).forEach(s=>{const v=m.value[s];v.isShown=e}),t==="weapon_size"&&Object.keys(h.value).forEach(s=>{const v=h.value[s];v.isShown=e})},P=()=>{x.value.forEach((t,e)=>{t.w_version_t="",t.w_mod_t="",t.w_type_t="",t.w_role_t="",t.w_title_t="",t.w_defence_t="",t.w_op_info_t="",t._index=e,t._isCompare=!1})},q=t=>{t.value._isCompare=!t.value._isCompare,u.value[t.value._index]===void 0&&(u.value[t.value._index]=!1),u.value[t.value._index]=!u.value[t.value._index]};return(t,e)=>{const s=X,v=Y,L=K;return b(),f(V,null,[o("div",ae,[o("div",se,[o("div",ie,[o("div",ne,[o("h3",de,d(t.$t("view.weapon-db.title")),1)]),o("div",re,[o("ol",ce,[e[11]||(e[11]=o("li",{class:"breadcrumb-item"},[o("a",{href:"#"},"Home")],-1)),o("li",_e,d(t.$t("view.weapon-db.title")),1)])])])])]),o("div",ue,[o("div",pe,[o("div",we,[o("div",me,[o("div",he,[o("div",ve,[o("div",fe,[o("div",be,[o("div",ye,[e[12]||(e[12]=o("span",{class:"input-group-text"},[o("i",{class:"bi bi-search"})],-1)),te(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>y.value.search=l),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,Se),[[oe,y.value.search]])])]),o("div",Ce,[r(L,{text:i(a)("view.weapon-db.label_weaponColShown",{cnt:F.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",ge,[e[13]||(e[13]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:n.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=l=>n.value.col_common=l),e[2]||(e[2]=l=>z("col_common"))],switch:"",state:n.value.col_common?!0:null},{default:c(()=>[g(d(i(a)("view.weapon-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),o("div",Te,[(b(!0),f(V,null,k(A.value,l=>(b(),f("div",xe,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[w=>l.isShown=w,w=>E(l)],switch:"",state:l.isShown?!0:null},{default:c(()=>[g(d(i(a)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),r(v),r(s,{modelValue:n.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=l=>n.value.col_combat=l),e[4]||(e[4]=l=>z("col_combat"))],switch:"",state:n.value.col_combat?!0:null},{default:c(()=>[g(d(i(a)("view.weapon-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),o("div",Ve,[(b(!0),f(V,null,k(B.value,l=>(b(),f("div",ze,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[w=>l.isShown=w,w=>E(l)],switch:"",state:l.isShown?!0:null},{default:c(()=>[g(d(i(a)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",ke,[r(L,{text:i(a)("view.weapon-db.label_weaponTypeShown",{cnt:N.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Le,[e[14]||(e[14]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:n.value.weapon_type,"onUpdate:modelValue":[e[5]||(e[5]=l=>n.value.weapon_type=l),e[6]||(e[6]=l=>z("weapon_type"))],switch:"",state:n.value.weapon_type?!0:null},{default:c(()=>[g(d(i(a)("view.weapon-db.label_selectAllWeaponType")),1)]),_:1},8,["modelValue","state"]),o("div",We,[(b(!0),f(V,null,k(m.value,l=>(b(),f("div",Ue,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":w=>l.isShown=w,switch:"",state:l.isShown?!0:null},{default:c(()=>[g(d(i(a)("weapon.type."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",$e,[r(L,{text:i(a)("view.weapon-db.label_weaponSizeShown",{cnt:R.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Ee,[e[15]||(e[15]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:n.value.weapon_size,"onUpdate:modelValue":[e[7]||(e[7]=l=>n.value.weapon_size=l),e[8]||(e[8]=l=>z("weapon_size"))],switch:"",state:n.value.weapon_size?!0:null},{default:c(()=>[g(d(i(a)("view.weapon-db.label_selectAllWeaponSize")),1)]),_:1},8,["modelValue","state"]),o("div",Oe,[(b(!0),f(V,null,k(h.value,l=>(b(),f("div",je,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":w=>l.isShown=w,switch:"",state:l.isShown?!0:null},{default:c(()=>[g(d(i(a)("weapon.size."+l.size_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",Ae,[o("div",Be,[o("button",{class:W(["btn",[S.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[9]||(e[9]=l=>I("compare"))},d(S.value.compare?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+d(i(a)("common.label.compare"))+" "+d(D.value),3)])]),o("div",Fe,[o("div",Ne,[o("button",{class:W(["btn",[i(_).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[10]||(e[10]=l=>i(_).switchCache())},d(i(_).isCacheEnabled.value?i(a)("common.label.on"):i(a)("common.label.off"))+"-"+d(i(a)("common.label.localStorage")),3)])])])]),e[16]||(e[16]=o("div",null,null,-1)),o("div",Re,[r(i(Q),{rows:H.value,columns:p.value,sortable:!0,cloneHeaderInFooter:!0,search:y.value.search,page:y.value.page,pageSize:y.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:c(l=>[o("div",De,[o("button",{type:"button",class:W(["btn",[l.value._isCompare?"btn-success":"btn-secondary"]]),onClick:w=>q(l)},d(l.value._isCompare?"+":"-"),11,He)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[17]||(e[17]=o("div",{class:"card-footer clearfix"},[o("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{Me as default};
