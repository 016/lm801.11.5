import{B as Y}from"./BModalOrchestrator.vue_vue_type_script_setup_true_lang-B30oaS2u-CC8WilxE.js";import{r as Z,L as ee,a as te,B as oe,W as le,_ as ae}from"./projectKeys-DIv5ch3b.js";import{_ as se}from"./BDropdownText.vue_vue_type_script_setup_true_lang-zF-Eo35m-PGkkNAsJ.js";import{u as ie,r as S,a as ne,w as A,o as de,c as V,b as w,d as o,e as r,f as p,t as n,g as c,h as i,R as re,i as ce,v as ue,n as $,F as z,j as v,k as W}from"./index-CpN8qdcX.js";const _e=()=>Z.get("/v1/weapons",{limit:500}),pe={class:"app-content-header"},me={class:"container-fluid"},we={class:"row"},ve={class:"col-sm-6"},he={class:"mb-0"},fe={class:"col-sm-6"},be={class:"breadcrumb float-sm-end"},ye={class:"breadcrumb-item"},Se={class:"breadcrumb-item active","aria-current":"page"},ge={class:"app-content"},Ce={class:"container-fluid"},Te={class:"row"},Ve={class:"col-lg-12"},xe={class:"card mb-4 mt-2"},ze={class:"card-header p-2 pt-3 pb-0"},ke={class:"row"},Le={class:"col-lg-3"},Ue={class:"input-group mb-3"},We=["placeholder"],$e={class:"col-lg-3"},je={class:"container"},Oe={class:"row"},Be={class:"col-6"},Ee={class:"row"},Ae={class:"col-6"},Pe={class:"col-lg-3"},Fe={class:"container"},Re={class:"row"},Ie={class:"col-6"},De={class:"col-lg-3"},Me={class:"container"},Ne={class:"row"},He={class:"col-6"},qe={class:"col-lg-3"},Ge={class:"container"},Je={class:"row"},Ke={class:"col-6"},Qe={class:"col-lg-3"},Xe={class:"d-grid gap-2 mb-2"},Ye={class:"col-lg-3"},Ze={class:"d-grid gap-2 mb-2"},et={class:"card-body p-2"},tt={class:"flex gap-4"},ot=["src","onClick"],lt={class:"flex gap-4"},at=["onClick"],st={class:"iconDiv"},it=["src"],_t={__name:"WeaponDBView",setup(nt){const{t:s,locale:P}=ie(),m=new ee(te),g=S({pageSize:20,page:1,search:""}),C=S({compare:!1}),d=S({col_common:!1,col_combat:!1,weapon_type:!0,weapon_size:!0,weapon_damageType:!0}),h=S({}),T=ne({modalShow:!1,imgPath:"",code:null}),k=S([]),f=S({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0}}),y=S({1:{size_id:1,isShown:!0},2:{size_id:2,isShown:!0},3:{size_id:3,isShown:!0}}),L=S({1:{type_id:1,isShown:!0},2:{type_id:2,isShown:!0},3:{type_id:3,isShown:!0},4:{type_id:4,isShown:!0},91:{type_id:91,isShown:!0}}),b=S([{field:"w_title_t",titleCode:"weapon.attr.w_title",colType:"common",title:"",hide:!1,isShown:!0},{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"w_code",titleCode:"weapon.attr.w_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"w_id",titleCode:"weapon.attr.w_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"w_version_t",titleCode:"weapon.attr.w_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"w_mod_t",titleCode:"weapon.attr.w_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"w_type_t",titleCode:"weapon.attr.w_type_id",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_size_t",titleCode:"weapon.attr.w_size_id",colType:"common",title:"",hide:!1,isShown:!0},{field:"w_role_t",titleCode:"weapon.attr.w_role_code",colType:"combat",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"w_damageType_t",titleCode:"weapon.attr.w_damage_type_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_op",titleCode:"weapon.attr.w_op",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_range",titleCode:"weapon.attr.w_range",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_dps",titleCode:"weapon.attr.w_dps",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_dph",titleCode:"weapon.attr.w_dph",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_emp",titleCode:"weapon.attr.w_emp",colType:"combat",title:"",hide:!1,isShown:!0},{field:"w_burst_size",titleCode:"weapon.attr.w_burst_size",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_burst_delay",titleCode:"weapon.attr.w_burst_delay",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_charges_ammo",titleCode:"weapon.attr.w_charges_ammo",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_sec_recharge",titleCode:"weapon.attr.w_sec_recharge",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_flux_shot",titleCode:"weapon.attr.w_flux_shot",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_flux_sec",titleCode:"weapon.attr.w_flux_sec",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_projectile_missile_speed",titleCode:"weapon.attr.w_projectile_missile_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_proj_hp",titleCode:"weapon.attr.w_proj_hp",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"w_min_spread",titleCode:"weapon.attr.w_min_spread",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_max_spread",titleCode:"weapon.attr.w_max_spread",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missile_launch_speed",titleCode:"weapon.attr.w_missile_launch_speed",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"w_missileSpeed_t",titleCode:"weapon.attr.w_missile_speed_code",colType:"combat",title:"",hide:!0,isShown:!1},{field:"w_missileTracking_t",titleCode:"weapon.attr.w_missile_tracking_code",colType:"combat",title:"",hide:!0,isShown:!1},{field:"w_missile_lifetime",titleCode:"weapon.attr.w_missile_lifetime",colType:"combat",title:"",type:"number",hide:!0,isShown:!1}]);A(P,()=>{O()}),de(async()=>{k.value=await _e(),J(),m.loadLS(["showAll","params","compareList","rawCols","selectedWeaponType","selectedWeaponSize","filter_params"],{showAll:d,params:g,compareList:h,rawCols:b,selectedWeaponType:f,selectedWeaponSize:y,filter_params:C}),m.isCacheEnabled.value&&j(),O(),m.appReady.value=!0}),A([b,d,g,C,f,y,h],()=>{m.appReady.value&&!m.initialLoad.value&&m.saveLS({showAll:d.value,params:g.value,filter_params:C.value,rawCols:b.value,selectedWeaponType:f.value,selectedWeaponSize:y.value,compareList:h.value}),m.appReady.value&&(m.initialLoad.value=!1)},{deep:!0});const F=V(()=>b.value.filter(t=>t.colType==="common")),R=V(()=>b.value.filter(t=>t.colType==="combat")),I=V(()=>b.value.reduce((e,a)=>e+(a.isShown?1:0),0)+"/"+b.value.length),D=V(()=>Object.values(f.value).reduce((e,a)=>e+(a.isShown?1:0),0)+"/"+Object.keys(f.value).length),M=V(()=>Object.values(L.value).reduce((e,a)=>e+(a.isShown?1:0),0)+"/"+Object.keys(f.value).length),N=V(()=>Object.values(y.value).reduce((e,a)=>e+(a.isShown?1:0),0)+"/"+Object.keys(y.value).length),H=V(()=>Object.values(h.value).reduce((e,a)=>e+(a?1:0),0)+"/"+k.value.length),q=V(()=>{let t=k.value.filter(e=>{var a;return(a=f.value[e.w_type_id])==null?void 0:a.isShown}).filter(e=>{var a;return(a=y.value[e.w_size_id])==null?void 0:a.isShown}).filter(e=>{var a;return(a=L.value[e.w_damageType_id])==null?void 0:a.isShown});return C.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,w_version_t:s("game.version-list."+e.w_version_id),w_mod_t:s("game.mod-list."+e.w_mod_id),w_role_t:s("weapon.role."+e.w_role_code),w_title_t:s("weapon.title."+e.w_code),w_size_t:s("weapon.size."+e.w_size_id),w_type_t:s("weapon.type."+e.w_type_id),w_damageType_t:s("weapon.damageType."+e.w_damageType_id),w_missileSpeed_t:s("weapon.speed."+e.w_missile_speed_id),w_missileTracking_t:s("weapon.tracking."+e.w_missile_tracking_id)}))}),G=t=>{j(),C.value[t]=!C.value[t]},j=()=>{k.value.forEach((t,e)=>{t._isCompare=!1,h.value[t._index]&&(t._isCompare=h.value[t._index])})},O=()=>{b.value.forEach(t=>{t.title=s(t.titleCode)})},B=t=>{t.hide=!t.isShown},U=t=>{const e=d.value[t];if(t.slice(0,4)==="col_"){const a=t.slice(4,99);b.value.forEach(u=>{u.colType===a&&(u.isShown=e,u.hide=!e)})}t==="weapon_type"&&Object.keys(f.value).forEach(a=>{const u=f.value[a];u.isShown=e}),t==="weapon_size"&&Object.keys(y.value).forEach(a=>{const u=y.value[a];u.isShown=e}),t==="weapon_damageType"&&Object.keys(L.value).forEach(a=>{const u=L.value[a];u.isShown=e})},J=()=>{k.value.forEach((t,e)=>{t.w_version_t="",t.w_mod_t="",t.w_type_t="",t.w_role_t="",t.w_title_t="",t.w_defence_t="",t.w_op_info_t="",t._index=e,t._isCompare=!1})},E=t=>{let e=t.split("/"),a="../assets/pics/ss_pics/";return e.map((u,x)=>{a+=`${u}`,x!==e.length-1&&(a+="/")}),new URL(a,import.meta.url).href},K=t=>{T.modalShow=!T.modalShow,T.imgPath=E(t.w_turretSprite),T.code=t.w_code},Q=t=>{t.value._isCompare=!t.value._isCompare,h.value[t.value._index]===void 0&&(h.value[t.value._index]=!1),h.value[t.value._index]=!h.value[t.value._index]};return(t,e)=>{const a=ae,u=se,x=oe,X=Y;return v(),w(z,null,[o("div",pe,[o("div",me,[o("div",we,[o("div",ve,[o("h3",he,[p(n(t.$t("view.weapon-db.title"))+" ",1),o("small",null,n(t.$t("view.weapon-db.version")),1)])]),o("div",fe,[o("ol",be,[o("li",ye,[r(i(re),{to:"/"},{default:c(()=>e[14]||(e[14]=[p("Home")])),_:1})]),o("li",Se,n(t.$t("view.weapon-db.title")),1)])])])])]),o("div",ge,[o("div",Ce,[o("div",Te,[o("div",Ve,[o("div",xe,[o("div",ze,[o("div",ke,[o("div",Le,[o("div",Ue,[e[15]||(e[15]=o("span",{class:"input-group-text"},[o("i",{class:"bi bi-search"})],-1)),ce(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>g.value.search=l),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,We),[[ue,g.value.search]])])]),o("div",$e,[r(x,{text:i(s)("view.weapon-db.label_weaponColShown",{cnt:I.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",je,[e[16]||(e[16]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(a,{modelValue:d.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=l=>d.value.col_common=l),e[2]||(e[2]=l=>U("col_common"))],switch:"",state:d.value.col_common?!0:null},{default:c(()=>[p(n(i(s)("view.weapon-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),o("div",Oe,[(v(!0),w(z,null,W(F.value,l=>(v(),w("div",Be,[r(a,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[_=>l.isShown=_,_=>B(l)],switch:"",state:l.isShown?!0:null},{default:c(()=>[p(n(i(s)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),r(u),r(a,{modelValue:d.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=l=>d.value.col_combat=l),e[4]||(e[4]=l=>U("col_combat"))],switch:"",state:d.value.col_combat?!0:null},{default:c(()=>[p(n(i(s)("view.weapon-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),o("div",Ee,[(v(!0),w(z,null,W(R.value,l=>(v(),w("div",Ae,[r(a,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[_=>l.isShown=_,_=>B(l)],switch:"",state:l.isShown?!0:null},{default:c(()=>[p(n(i(s)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",Pe,[r(x,{text:i(s)("view.weapon-db.label_weaponTypeShown",{cnt:D.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Fe,[e[17]||(e[17]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(a,{modelValue:d.value.weapon_type,"onUpdate:modelValue":[e[5]||(e[5]=l=>d.value.weapon_type=l),e[6]||(e[6]=l=>U("weapon_type"))],switch:"",state:d.value.weapon_type?!0:null},{default:c(()=>[p(n(i(s)("view.weapon-db.label_selectAllWeaponType")),1)]),_:1},8,["modelValue","state"]),o("div",Re,[(v(!0),w(z,null,W(f.value,l=>(v(),w("div",Ie,[r(a,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":_=>l.isShown=_,switch:"",state:l.isShown?!0:null},{default:c(()=>[p(n(i(s)("weapon.type."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",De,[r(x,{text:i(s)("view.weapon-db.label_weaponSizeShown",{cnt:N.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Me,[e[18]||(e[18]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(a,{modelValue:d.value.weapon_size,"onUpdate:modelValue":[e[7]||(e[7]=l=>d.value.weapon_size=l),e[8]||(e[8]=l=>U("weapon_size"))],switch:"",state:d.value.weapon_size?!0:null},{default:c(()=>[p(n(i(s)("view.weapon-db.label_selectAllWeaponSize")),1)]),_:1},8,["modelValue","state"]),o("div",Ne,[(v(!0),w(z,null,W(y.value,l=>(v(),w("div",He,[r(a,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":_=>l.isShown=_,switch:"",state:l.isShown?!0:null},{default:c(()=>[p(n(i(s)("weapon.size."+l.size_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",qe,[r(x,{text:i(s)("view.weapon-db.label_weaponDamageTypeShown",{cnt:M.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Ge,[e[19]||(e[19]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(a,{modelValue:d.value.weapon_damageType,"onUpdate:modelValue":[e[9]||(e[9]=l=>d.value.weapon_damageType=l),e[10]||(e[10]=l=>U("weapon_damageType"))],switch:"",state:d.value.weapon_damageType?!0:null},{default:c(()=>[p(n(i(s)("view.weapon-db.label_selectAllWeaponDamageType")),1)]),_:1},8,["modelValue","state"]),o("div",Je,[(v(!0),w(z,null,W(L.value,l=>(v(),w("div",Ke,[r(a,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":_=>l.isShown=_,switch:"",state:l.isShown?!0:null},{default:c(()=>[p(n(i(s)("weapon.damageType."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",Qe,[o("div",Xe,[o("button",{class:$(["btn",[C.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[11]||(e[11]=l=>G("compare"))},n(C.value.compare?i(s)("common.label.on"):i(s)("common.label.off"))+"-"+n(i(s)("common.label.compare"))+" "+n(H.value),3)])]),o("div",Ye,[o("div",Ze,[o("button",{class:$(["btn",[i(m).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[12]||(e[12]=l=>i(m).switchCache())},n(i(m).isCacheEnabled.value?i(s)("common.label.on"):i(s)("common.label.off"))+"-"+n(i(s)("common.label.localStorage")),3)])])])]),e[20]||(e[20]=o("div",null,null,-1)),o("div",et,[r(i(le),{rows:q.value,columns:b.value,sortable:!0,cloneHeaderInFooter:!0,stickyFirstColumn:!0,search:g.value.search,page:g.value.page,pageSize:g.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{w_title_t:c(l=>[o("div",tt,[o("img",{src:E(l.value.w_turretSprite),style:{width:"58px",cursor:"pointer"},onClick:_=>K(l.value)},null,8,ot),p(" "+n(l.value.w_title_t),1)])]),compare:c(l=>[o("div",lt,[o("button",{type:"button",class:$(["btn",[l.value._isCompare?"btn-success":"btn-secondary"]]),onClick:_=>Q(l)},n(l.value._isCompare?"+":"-"),11,at)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[21]||(e[21]=o("div",{class:"card-footer clearfix"},[o("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])]),r(X,{modelValue:T.modalShow,"onUpdate:modelValue":e[13]||(e[13]=l=>T.modalShow=l),title:i(s)("weapon.title."+T.code)+" - sst.lib00.com"},{default:c(()=>[o("div",st,[o("img",{src:T.imgPath,class:"iconImg"},null,8,it)])]),_:1},8,["modelValue","title"])],64)}}};export{_t as default};
