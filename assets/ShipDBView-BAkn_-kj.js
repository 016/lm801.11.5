import{r as K,B as Q,W as X,_ as Y,a as Z}from"./style-BY7AgxPZ.js";import{u as ee,r as b,w as te,b as se,d as y,c as m,a as o,t as n,e as le,v as oe,f as r,g as c,h as d,n as L,F as T,o as h,i as f,j as U}from"./index-CoMGthxh.js";const ie=()=>K.get("/v1/ships",{limit:500}),ae={class:"app-content-header"},de={class:"container-fluid"},ne={class:"row"},re={class:"col-sm-6"},_e={class:"mb-0"},ce={class:"col-sm-6"},ue={class:"breadcrumb float-sm-end"},pe={class:"breadcrumb-item active","aria-current":"page"},me={class:"app-content"},he={class:"container-fluid"},fe={class:"row"},ve={class:"col-lg-12"},we={class:"card mb-4 mt-2"},be={class:"card-header p-2 pt-3 pb-0"},ye={class:"row"},Se={class:"col-lg-3"},Ce={class:"input-group mb-3"},ge=["placeholder"],Te={class:"col-lg-3"},Ve={class:"container"},xe={class:"row"},ke={class:"col-6"},Ue={class:"row"},$e={class:"col-6"},Ee={class:"row"},Le={class:"col-6"},ze={class:"col-lg-3"},Ae={class:"container"},Be={class:"row"},Oe={class:"col-6"},je={class:"col-lg-3"},Fe={class:"container"},We={class:"row"},He={class:"col-6"},Ne={class:"col-lg-3"},qe={class:"d-grid gap-2 mb-2"},De={class:"card-body p-2"},Me={class:"flex gap-4"},Ie=["onClick"],Je={__name:"ShipDBView",setup(Pe){const{t:i,locale:z}=ee(),V=b({pageSize:20,page:2,search:""}),p=b({compare:!1,ship_slot:!1}),_=b({col_common:!1,col_combat:!1,col_logi:!1,ship_type:!0,ship_slot:!1}),S=b({}),x=b([]),C=b({1:{type_id:1,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0},31:{type_id:31,isShown:!0}}),g=b([]),w=b([{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"s_id",titleCode:"ship.attr.s_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"s_title_t",titleCode:"ship.attr.s_title_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"s_version_t",titleCode:"ship.attr.s_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"s_mod_t",titleCode:"ship.attr.s_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"s_type_t",titleCode:"ship.attr.s_type_id",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_role_t",titleCode:"ship.attr.s_role_code",colType:"combat",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"s_sys_t",titleCode:"ship.attr.s_sys_code",colType:"combat",title:"",minWidth:"110px",hide:!1,isShown:!0},{field:"s_op_info_t",titleCode:"ship.attr.s_op_info",colType:"combat",title:"",minWidth:"160px",hide:!1,isShown:!0},{field:"s_dp",titleCode:"ship.attr.s_dp",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_op",titleCode:"ship.attr.s_op",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_defence_t",titleCode:"ship.attr.s_defence_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_speed",titleCode:"ship.attr.s_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_flux",titleCode:"ship.attr.s_flux",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_flux_dis",titleCode:"ship.attr.s_flux_dis",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_hull",titleCode:"ship.attr.s_hull",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_armor",titleCode:"ship.attr.s_armor",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_fd",titleCode:"ship.attr.s_fd",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_effective_shield",titleCode:"ship.attr.s_effective_shield",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_arc",titleCode:"ship.attr.s_shield_arc",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_upkeep",titleCode:"ship.attr.s_shield_upkeep",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_rate",titleCode:"ship.attr.s_shield_rate",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cloak_activation",titleCode:"ship.attr.s_cloak_activation",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cloak_upkeep",titleCode:"ship.attr.s_cloak_upkeep",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_is_civ_t",titleCode:"ship.attr.s_is_civ",colType:"logi",title:"",hide:!0,isShown:!1},{field:"s_peak",titleCode:"ship.attr.s_peak",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_maintenance",titleCode:"ship.attr.s_maintenance",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cr_depl",titleCode:"ship.attr.s_cr_depl",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cr_recovery_rate",titleCode:"ship.attr.s_cr_recovery_rate",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cr_recovery_cost",titleCode:"ship.attr.s_cr_recovery_cost",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cargo",titleCode:"ship.attr.s_cargo",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_crew",titleCode:"ship.attr.s_crew",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_crew_need",titleCode:"ship.attr.s_crew_need",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_fuel",titleCode:"ship.attr.s_fuel",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_max_burn",titleCode:"ship.attr.s_max_burn",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_jump_cost",titleCode:"ship.attr.s_jump_cost",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_sensor_profile",titleCode:"ship.attr.s_sensor_profile",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_sensor_strength",titleCode:"ship.attr.s_sensor_strength",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_ofp",titleCode:"ship.attr.s_ofp",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_wfg",titleCode:"ship.attr.s_wfg",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_op_balance",titleCode:"ship.attr.s_op_balance",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_fighter_op",titleCode:"ship.attr.s_fighter_op",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_flight_decks",titleCode:"ship.attr.s_flight_decks",colType:"logi",title:"",type:"number",hide:!0,isShown:!1}]);te(z,()=>{E()}),se(async()=>{x.value=await ie(),I(),q(),E()});const A=y(()=>w.value.filter(t=>t.colType==="common")),B=y(()=>w.value.filter(t=>t.colType==="combat")),O=y(()=>w.value.filter(t=>t.colType==="logi")),j=y(()=>w.value.reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+w.value.length),F=y(()=>Object.values(C.value).reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+Object.keys(C.value).length),W=y(()=>g.value.reduce((e,s)=>e+(s.isShown?1:0),0)+"/"+g.value.length),H=y(()=>Object.values(S.value).reduce((e,s)=>e+(s?1:0),0)+"/"+x.value.length),N=y(()=>{const t=[];g.value.forEach(s=>{s.isShown&&t.push(s.sizeCode+s.typeCode)});let e=x.value.filter(s=>C.value[s.s_type_id].isShown);return p.value.ship_slot&&(e=e.filter(s=>t.some(a=>s["s_m_"+a]>0))),p.value.compare&&(e=e.filter(s=>s._isCompare)),e.map(s=>({...s,s_version_t:i("game.version-list."+s.s_version_id),s_mod_t:i("game.mod-list."+s.s_mod_id),s_type_t:i("ship.type."+s.s_type_id),s_role_t:i("ship.role."+s.s_role_code),s_title_t:i("ship.title."+s.s_title_code),s_defence_t:i("ship.sys."+s.s_defence_code),s_sys_t:i("ship.sys."+s.s_sys_code),s_is_civ_t:i("common.yesno."+s.s_is_civ),s_op_info_t:G(s.s_op_info_code,s.s_op_info_add_code)}))}),q=()=>{const t=["s","m","l"],e=["b","m","e","s","u","h","c"];t.forEach(s=>{e.forEach(a=>{g.value.push({sizeCode:s,typeCode:a,isShown:!1})})})},D=t=>{M(),p.value[t]=!p.value[t]},M=()=>{x.value.forEach((t,e)=>{t._isCompare=!1,S.value[t._index]&&(t._isCompare=S.value[t._index])})},E=()=>{w.value.forEach(t=>{t.title=i(t.titleCode)})},$=t=>{t.hide=!t.isShown},k=t=>{const e=_.value[t];if(t.slice(0,4)==="col_"){const s=t.slice(4,99);w.value.forEach(a=>{a.colType===s&&(a.isShown=e,a.hide=!e)})}t==="ship_type"&&Object.keys(C.value).forEach(s=>{const a=C.value[s];a.isShown=e}),t==="ship_slot"&&g.value.forEach(s=>{s.isShown=e})},I=()=>{x.value.forEach((t,e)=>{t.s_version_t="",t.s_mod_t="",t.s_type_t="",t.s_role_t="",t.s_title_t="",t.s_defence_t="",t.s_op_info_t="",t.s_op_info_code=P(t),t.s_op_info_add_code=R(t),t._index=e,t._isCompare=!1})},P=t=>{const e=["s_m_sm","s_m_mm","s_m_lm","s_m_se","s_m_me","s_m_le","s_m_sb","s_m_mb","s_m_lb","s_m_su","s_m_mu","s_m_lu","s_m_sh","s_m_mh","s_m_lh","s_m_sc","s_m_mc","s_m_lc","s_m_ss","s_m_ms","s_m_ls"];let s="";return e.forEach(a=>{t[a]>0&&(s.length>0&&(s+="+"),s+=a.substring(4,6)+"x"+t[a])}),s},R=t=>{const e=["s_m1","s_m2","s_m3","s_m4"];let s="";return e.forEach(a=>{t[a]!==null&&t[a].length>0&&(s.length>0&&(s+="+"),s+=t[a]+"x"+t[a+"_cnt"])}),s},G=(t,e)=>{let s="";return t.length>0&&t.split("+").forEach(v=>{s.length>0&&(s+=". "),s+=i("weapon.size."+v.slice(0,1))+i("weapon.type."+v.slice(1,2))+v.slice(2)}),e.length>0&&e.split("+").forEach(v=>{s.length>0&&(s+=". ");const l=v.split("x");s+=i(l[0])+"x"+l[1]}),s.length<1&&(s="-"),s},J=t=>{t.value._isCompare=!t.value._isCompare,S.value[t.value._index]===void 0&&(S.value[t.value._index]=!1),S.value[t.value._index]=!S.value[t.value._index]};return(t,e)=>{const s=Y,a=Z,v=Q;return h(),m(T,null,[o("div",ae,[o("div",de,[o("div",ne,[o("div",re,[o("h3",_e,n(t.$t("view.ship-db.title")),1)]),o("div",ce,[o("ol",ue,[e[13]||(e[13]=o("li",{class:"breadcrumb-item"},[o("a",{href:"#"},"Home")],-1)),o("li",pe,n(t.$t("view.ship-db.title")),1)])])])])]),o("div",me,[o("div",he,[o("div",fe,[o("div",ve,[o("div",we,[o("div",be,[o("div",ye,[o("div",Se,[o("div",Ce,[e[14]||(e[14]=o("span",{class:"input-group-text"},[o("i",{class:"bi bi-search"})],-1)),le(o("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>V.value.search=l),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,ge),[[oe,V.value.search]])])]),o("div",Te,[r(v,{text:d(i)("view.ship-db.label_shipColShown",{cnt:j.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Ve,[e[15]||(e[15]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:_.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=l=>_.value.col_common=l),e[2]||(e[2]=l=>k("col_common"))],switch:"",state:_.value.col_common?!0:null},{default:c(()=>[f(n(d(i)("view.ship-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),o("div",xe,[(h(!0),m(T,null,U(A.value,l=>(h(),m("div",ke,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[u=>l.isShown=u,u=>$(l)],switch:"",state:l.isShown?!0:null},{default:c(()=>[f(n(d(i)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),r(a),r(s,{modelValue:_.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=l=>_.value.col_combat=l),e[4]||(e[4]=l=>k("col_combat"))],switch:"",state:_.value.col_combat?!0:null},{default:c(()=>[f(n(d(i)("view.ship-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),o("div",Ue,[(h(!0),m(T,null,U(B.value,l=>(h(),m("div",$e,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[u=>l.isShown=u,u=>$(l)],switch:"",state:l.isShown?!0:null},{default:c(()=>[f(n(d(i)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),r(a),r(s,{modelValue:_.value.col_logi,"onUpdate:modelValue":[e[5]||(e[5]=l=>_.value.col_logi=l),e[6]||(e[6]=l=>k("col_logi"))],switch:"",state:_.value.col_logi?!0:null},{default:c(()=>[f(n(d(i)("view.ship-db.label_selectAllLogiCol")),1)]),_:1},8,["modelValue","state"]),o("div",Ee,[(h(!0),m(T,null,U(O.value,l=>(h(),m("div",Le,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":[u=>l.isShown=u,u=>$(l)],switch:"",state:l.isShown?!0:null},{default:c(()=>[f(n(d(i)(l.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",ze,[r(v,{text:d(i)("view.ship-db.label_shipTypeShown",{cnt:F.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Ae,[e[16]||(e[16]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:_.value.ship_type,"onUpdate:modelValue":[e[7]||(e[7]=l=>_.value.ship_type=l),e[8]||(e[8]=l=>k("ship_type"))],switch:"",state:_.value.ship_type?!0:null},{default:c(()=>[f(n(d(i)("view.ship-db.label_selectAllShipType")),1)]),_:1},8,["modelValue","state"]),o("div",Be,[(h(!0),m(T,null,U(C.value,l=>(h(),m("div",Oe,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":u=>l.isShown=u,switch:"",state:l.isShown?!0:null},{default:c(()=>[f(n(d(i)("ship.type."+l.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),o("div",je,[r(v,{text:(p.value.ship_slot?d(i)("common.label.on"):d(i)("common.label.off"))+"-"+d(i)("view.ship-db.label_shipSlotShown",{cnt:W.value}),variant:p.value.ship_slot?"primary":"outline-primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[o("div",Fe,[e[17]||(e[17]=o("div",{class:"row"},[o("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),r(s,{modelValue:p.value.ship_slot,"onUpdate:modelValue":e[9]||(e[9]=l=>p.value.ship_slot=l),switch:"",state:p.value.ship_slot?!0:null},{default:c(()=>[f(n(d(i)("view.ship-db.label_shipSlotFilterActive")),1)]),_:1},8,["modelValue","state"]),r(a),r(s,{modelValue:_.value.ship_slot,"onUpdate:modelValue":[e[10]||(e[10]=l=>_.value.ship_slot=l),e[11]||(e[11]=l=>k("ship_slot"))],switch:"",state:_.value.ship_slot?!0:null},{default:c(()=>[f(n(d(i)("view.ship-db.label_selectAllShipSlot")),1)]),_:1},8,["modelValue","state"]),o("div",We,[(h(!0),m(T,null,U(g.value,l=>(h(),m("div",He,[r(s,{class:"ms-2",modelValue:l.isShown,"onUpdate:modelValue":u=>l.isShown=u,switch:"",state:l.isShown?!0:null},{default:c(()=>[f(n(d(i)("weapon.size."+l.sizeCode))+n(d(i)("weapon.type."+l.typeCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text","variant"])]),o("div",Ne,[o("div",qe,[o("button",{class:L(["btn",[p.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[12]||(e[12]=l=>D("compare"))},n(p.value.compare?d(i)("common.label.on"):d(i)("common.label.off"))+"-"+n(d(i)("common.label.compare"))+" "+n(H.value),3)])])])]),e[18]||(e[18]=o("div",null,null,-1)),o("div",De,[r(d(X),{rows:N.value,columns:w.value,sortable:!0,cloneHeaderInFooter:!0,search:V.value.search,page:V.value.page,pageSize:V.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{compare:c(l=>[o("div",Me,[o("button",{type:"button",class:L(["btn",[l.value._isCompare?"btn-success":"btn-secondary"]]),onClick:u=>J(l)},n(l.value._isCompare?"+":"-"),11,Ie)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[19]||(e[19]=o("div",{class:"card-footer clearfix"},[o("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{Je as default};
