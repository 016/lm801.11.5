import{r as Q,L as X,S as Y,B as Z,W as ee,_ as te}from"./projectKeys-DhEGsJwt.js";import{_ as se}from"./BDropdownText.vue_vue_type_script_setup_true_lang-zF-Eo35m-BB1L1mgs.js";import{u as le,r as g,w as R,o as ie,c as T,a as v,b as l,d as p,t as n,e as _,f as c,g as a,R as oe,h as ae,v as de,n as E,F as V,i as w,j as k}from"./index-CLbH8jsY.js";const ne=()=>Q.get("/v1/ships",{limit:500}),re={class:"app-content-header"},_e={class:"container-fluid"},ce={class:"row"},ue={class:"col-sm-6"},pe={class:"mb-0"},he={class:"col-sm-6"},me={class:"breadcrumb float-sm-end"},fe={class:"breadcrumb-item"},ve={class:"breadcrumb-item active","aria-current":"page"},we={class:"app-content"},be={class:"container-fluid"},ye={class:"row"},Se={class:"col-lg-12"},Ce={class:"card mb-4 mt-2"},ge={class:"card-header p-2 pt-3 pb-0"},Te={class:"row"},Ve={class:"col-lg-3"},xe={class:"input-group mb-3"},Le=["placeholder"],ke={class:"col-lg-3"},Ue={class:"container"},$e={class:"row"},Ee={class:"col-6"},ze={class:"row"},Be={class:"col-6"},Re={class:"row"},Fe={class:"col-6"},je={class:"col-lg-3"},Ae={class:"container"},Oe={class:"row"},We={class:"col-6"},Ie={class:"col-lg-3"},Pe={class:"container"},He={class:"row"},Ne={class:"col-6"},De={class:"col-lg-3"},Me={class:"d-grid gap-2 mb-2"},qe={class:"col-lg-3"},Ge={class:"d-grid gap-2 mb-2"},Je={class:"card-body p-2"},Ke={class:"flex gap-4"},Qe=["src"],Xe={class:"flex gap-4"},Ye=["onClick"],lt={__name:"ShipDBView",setup(Ze){const{t:o,locale:F}=le(),m=new X(Y),C=g({pageSize:20,page:1,search:""}),u=g({compare:!1,ship_slot:!1}),r=g({col_common:!1,col_combat:!1,col_logi:!1,ship_type:!0,ship_slot:!1}),b=g({}),x=g([]),y=g({1:{type_id:1,isShown:!0},11:{type_id:11,isShown:!0},21:{type_id:21,isShown:!0},31:{type_id:31,isShown:!0},51:{type_id:51,isShown:!0}}),S=g([]),f=g([{field:"s_title_t",titleCode:"ship.attr.s_title_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"compare",titleCode:"common.label.compare",colType:"common",hide:!1,isShown:!0},{field:"s_id",titleCode:"ship.attr.s_id",colType:"common",title:"",isUnique:!0,type:"number",hide:!0,isShown:!1},{field:"s_version_t",titleCode:"ship.attr.s_version_id",colType:"common",title:"",minWidth:"94px",hide:!0,isShown:!1},{field:"s_mod_t",titleCode:"ship.attr.s_mod_id",colType:"common",title:"",hide:!0,isShown:!1},{field:"s_code",titleCode:"ship.attr.s_code",colType:"common",title:"",hide:!1,isShown:!0},{field:"s_type_t",titleCode:"ship.attr.s_type_id",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_role_t",titleCode:"ship.attr.s_role_code",colType:"combat",title:"",minWidth:"100px",hide:!1,isShown:!0},{field:"s_sys_t",titleCode:"ship.attr.s_sys_code",colType:"combat",title:"",minWidth:"110px",hide:!1,isShown:!0},{field:"s_op_info_t",titleCode:"ship.attr.s_op_info",colType:"combat",title:"",minWidth:"160px",hide:!1,isShown:!0},{field:"s_dp",titleCode:"ship.attr.s_dp",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_op",titleCode:"ship.attr.s_op",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_defence_t",titleCode:"ship.attr.s_defence_code",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_base_value",titleCode:"ship.attr.s_base_value",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_speed",titleCode:"ship.attr.s_speed",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_speed_acc",titleCode:"ship.attr.s_speed_acc",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_speed_dec",titleCode:"ship.attr.s_speed_dec",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_max_turn_rate",titleCode:"ship.attr.s_max_turn_rate",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_turn_acc",titleCode:"ship.attr.s_turn_acc",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_flux",titleCode:"ship.attr.s_flux",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_flux_dis",titleCode:"ship.attr.s_flux_dis",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_hull",titleCode:"ship.attr.s_hull",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_armor",titleCode:"ship.attr.s_armor",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_collisionRadius",titleCode:"ship.attr.s_collisionRadius",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_id_t",titleCode:"ship.attr.s_shield_id",colType:"combat",title:"",hide:!1,isShown:!0},{field:"s_shield_arc",titleCode:"ship.attr.s_shield_arc",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_upkeep",titleCode:"ship.attr.s_shield_upkeep",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_shield_rate",titleCode:"ship.attr.s_shield_rate",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cloak_activation",titleCode:"ship.attr.s_cloak_activation",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cloak_upkeep",titleCode:"ship.attr.s_cloak_upkeep",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_peak",titleCode:"ship.attr.s_peak",colType:"combat",title:"",type:"number",hide:!1,isShown:!0},{field:"s_fighter_op",titleCode:"ship.attr.s_fighter_op",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_fighter_bay",titleCode:"ship.attr.s_fighter_bay",colType:"combat",title:"",type:"number",hide:!0,isShown:!1},{field:"s_mass",titleCode:"ship.attr.s_mass",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_is_civ_t",titleCode:"ship.attr.s_is_civ",colType:"logi",title:"",hide:!0,isShown:!1},{field:"s_maintenance",titleCode:"ship.attr.s_maintenance",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cr_depl",titleCode:"ship.attr.s_cr_depl",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_cr_recovery_rate",titleCode:"ship.attr.s_cr_recovery_rate",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cr_recovery_cost",titleCode:"ship.attr.s_cr_recovery_cost",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cr_loss_s",titleCode:"ship.attr.s_cr_loss_s",colType:"logi",title:"",type:"number",hide:!0,isShown:!1},{field:"s_cargo",titleCode:"ship.attr.s_cargo",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_crew",titleCode:"ship.attr.s_crew",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_crew_need",titleCode:"ship.attr.s_crew_need",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_fuel",titleCode:"ship.attr.s_fuel",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_max_burn",titleCode:"ship.attr.s_max_burn",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_jump_cost",titleCode:"ship.attr.s_jump_cost",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_sensor_profile",titleCode:"ship.attr.s_sensor_profile",colType:"logi",title:"",type:"number",hide:!1,isShown:!0},{field:"s_sensor_strength",titleCode:"ship.attr.s_sensor_strength",colType:"logi",title:"",type:"number",hide:!1,isShown:!0}]);R(F,()=>{B()}),ie(async()=>{x.value=await ne(),q(),D(),m.loadLS(["showAll","params","compareList","rawCols","selectedShipSlot","selectedShipType","filter_params"],{showAll:r,params:C,compareList:b,rawCols:f,selectedShipSlot:S,selectedShipType:y,filter_params:u}),m.isCacheEnabled.value&&z(),B(),m.appReady.value=!0}),R([f,r,C,u,S,y,b],()=>{m.appReady.value&&!m.initialLoad.value&&m.saveLS({showAll:r.value,params:C.value,filter_params:u.value,rawCols:f.value,selectedShipSlot:S.value,selectedShipType:y.value,compareList:b.value}),m.appReady.value&&(m.initialLoad.value=!1)},{deep:!0});const j=T(()=>f.value.filter(t=>t.colType==="common")),A=T(()=>f.value.filter(t=>t.colType==="combat")),O=T(()=>f.value.filter(t=>t.colType==="logi")),W=T(()=>f.value.reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+f.value.length),I=T(()=>Object.values(y.value).reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+Object.keys(y.value).length),P=T(()=>S.value.reduce((e,i)=>e+(i.isShown?1:0),0)+"/"+S.value.length),H=T(()=>Object.values(b.value).reduce((e,i)=>e+(i?1:0),0)+"/"+x.value.length),N=T(()=>{let t=x.value.filter(e=>y.value[e.s_type_id].isShown);if(u.value.ship_slot){const e=[];S.value.forEach(i=>{i.isShown&&e.push(i.sizeCode+i.typeCode)}),t=t.filter(i=>e.some(d=>i["s_ws_"+d]>0))}return u.value.compare&&(t=t.filter(e=>e._isCompare)),t.map(e=>({...e,s_version_t:o("game.version-list."+e.s_version_id),s_mod_t:o("game.mod-list."+e.s_mod_id),s_type_t:o("ship.type."+e.s_type_id),s_role_t:o("ship.role."+e.s_role_code),s_title_t:o("ship.title."+e.s_code),s_defence_t:o("ship.sys.title."+e.s_defense_code),s_shield_id_t:o("ship.shieldType."+e.s_shield_id),s_sys_t:o("ship.sys.title."+e.s_sys_code),s_is_civ_t:o("common.yesno."+e.s_is_civ),s_op_info_t:J(e)}))}),D=()=>{const t=["s","m","l"],e=["b","m","e","s","u","h","c","l","sm"];t.forEach(i=>{e.forEach(d=>{S.value.push({sizeCode:i,typeCode:d,isShown:!1})})})},M=t=>{z(),u.value[t]=!u.value[t]},z=()=>{x.value.forEach((t,e)=>{t._isCompare=!1,b.value[t._index]&&(t._isCompare=b.value[t._index])})},B=()=>{f.value.forEach(t=>{t.title=o(t.titleCode)})},U=t=>{t.hide=!t.isShown},L=t=>{const e=r.value[t];if(t.slice(0,4)==="col_"){const i=t.slice(4,99);f.value.forEach(d=>{d.colType===i&&(d.isShown=e,d.hide=!e)})}t==="ship_type"&&Object.keys(y.value).forEach(i=>{const d=y.value[i];d.isShown=e}),t==="ship_slot"&&S.value.forEach(i=>{i.isShown=e})},q=()=>{x.value.forEach((t,e)=>{t.s_version_t="",t.s_mod_t="",t.s_type_t="",t.s_role_t="",t.s_title_t="",t.s_defence_t="",t.s_op_info_t="",t.s_op_info_code="",t.s_op_info_add_code="",t._index=e,t._isCompare=!1})},G=t=>`${new URL("../assets/pics/ss_pics/ships/",import.meta.url).href}/${t}`,J=t=>{let e="",i=["s_ws_sm","s_ws_mm","s_ws_lm","s_ws_se","s_ws_me","s_ws_le","s_ws_sb","s_ws_mb","s_ws_lb","s_ws_su","s_ws_mu","s_ws_lu","s_ws_sh","s_ws_mh","s_ws_lh","s_ws_sc","s_ws_mc","s_ws_lc","s_ws_ss","s_ws_ms","s_ws_ls","s_ws_sl","s_ws_ml","s_ws_ll"];return i.forEach(d=>{t[d]>0&&(e.length>0&&(e+="+"),e+=o("weapon.size."+d.slice(5,6))+o("weapon.type."+d.slice(6))+"x"+t[d])}),i=["s_m1","s_m2","s_m3","s_m4"],i.forEach(d=>{t[d]!==null&&t[d].length>0&&(e.length>0&&(e+="+"),e+=o(t[d].replace("_wing",""))+"x"+t[d+"_cnt"])}),e.length<1&&(e="-"),e},K=t=>{t.value._isCompare=!t.value._isCompare,b.value[t.value._index]===void 0&&(b.value[t.value._index]=!1),b.value[t.value._index]=!b.value[t.value._index]};return(t,e)=>{const i=te,d=se,$=Z;return w(),v(V,null,[l("div",re,[l("div",_e,[l("div",ce,[l("div",ue,[l("h3",pe,[p(n(t.$t("view.ship-db.title"))+" ",1),l("small",null,n(t.$t("view.ship-db.version")),1)])]),l("div",he,[l("ol",me,[l("li",fe,[_(a(oe),{to:"/"},{default:c(()=>e[14]||(e[14]=[p("Home")])),_:1})]),l("li",ve,n(t.$t("view.ship-db.title")),1)])])])])]),l("div",we,[l("div",be,[l("div",ye,[l("div",Se,[l("div",Ce,[l("div",ge,[l("div",Te,[l("div",Ve,[l("div",xe,[e[15]||(e[15]=l("span",{class:"input-group-text"},[l("i",{class:"bi bi-search"})],-1)),ae(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>C.value.search=s),type:"text",class:"form-control",placeholder:t.$t("common.label.typeForSearch")},null,8,Le),[[de,C.value.search]])])]),l("div",ke,[_($,{text:a(o)("view.ship-db.label_shipColShown",{cnt:W.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",Ue,[e[16]||(e[16]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),_(i,{modelValue:r.value.col_common,"onUpdate:modelValue":[e[1]||(e[1]=s=>r.value.col_common=s),e[2]||(e[2]=s=>L("col_common"))],switch:"",state:r.value.col_common?!0:null},{default:c(()=>[p(n(a(o)("view.ship-db.label_selectAllCommonCol")),1)]),_:1},8,["modelValue","state"]),l("div",$e,[(w(!0),v(V,null,k(j.value,s=>(w(),v("div",Ee,[_(i,{class:"ms-2",modelValue:s.isShown,"onUpdate:modelValue":[h=>s.isShown=h,h=>U(s)],switch:"",state:s.isShown?!0:null},{default:c(()=>[p(n(a(o)(s.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),_(d),_(i,{modelValue:r.value.col_combat,"onUpdate:modelValue":[e[3]||(e[3]=s=>r.value.col_combat=s),e[4]||(e[4]=s=>L("col_combat"))],switch:"",state:r.value.col_combat?!0:null},{default:c(()=>[p(n(a(o)("view.ship-db.label_selectAllCombatCol")),1)]),_:1},8,["modelValue","state"]),l("div",ze,[(w(!0),v(V,null,k(A.value,s=>(w(),v("div",Be,[_(i,{class:"ms-2",modelValue:s.isShown,"onUpdate:modelValue":[h=>s.isShown=h,h=>U(s)],switch:"",state:s.isShown?!0:null},{default:c(()=>[p(n(a(o)(s.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))]),_(d),_(i,{modelValue:r.value.col_logi,"onUpdate:modelValue":[e[5]||(e[5]=s=>r.value.col_logi=s),e[6]||(e[6]=s=>L("col_logi"))],switch:"",state:r.value.col_logi?!0:null},{default:c(()=>[p(n(a(o)("view.ship-db.label_selectAllLogiCol")),1)]),_:1},8,["modelValue","state"]),l("div",Re,[(w(!0),v(V,null,k(O.value,s=>(w(),v("div",Fe,[_(i,{class:"ms-2",modelValue:s.isShown,"onUpdate:modelValue":[h=>s.isShown=h,h=>U(s)],switch:"",state:s.isShown?!0:null},{default:c(()=>[p(n(a(o)(s.titleCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",je,[_($,{text:a(o)("view.ship-db.label_shipTypeShown",{cnt:I.value}),variant:"primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",Ae,[e[17]||(e[17]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),_(i,{modelValue:r.value.ship_type,"onUpdate:modelValue":[e[7]||(e[7]=s=>r.value.ship_type=s),e[8]||(e[8]=s=>L("ship_type"))],switch:"",state:r.value.ship_type?!0:null},{default:c(()=>[p(n(a(o)("view.ship-db.label_selectAllShipType")),1)]),_:1},8,["modelValue","state"]),l("div",Oe,[(w(!0),v(V,null,k(y.value,s=>(w(),v("div",We,[_(i,{class:"ms-2",modelValue:s.isShown,"onUpdate:modelValue":h=>s.isShown=h,switch:"",state:s.isShown?!0:null},{default:c(()=>[p(n(a(o)("ship.type."+s.type_id)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text"])]),l("div",Ie,[_($,{text:(u.value.ship_slot?a(o)("common.label.on"):a(o)("common.label.off"))+"-"+a(o)("view.ship-db.label_shipSlotShown",{cnt:P.value}),variant:u.value.ship_slot?"primary":"outline-primary",class:"d-grid","auto-close":"outside"},{default:c(()=>[l("div",Pe,[e[18]||(e[18]=l("div",{class:"row"},[l("div",{class:"col-3",style:{"min-width":"450px"}})],-1)),_(i,{modelValue:u.value.ship_slot,"onUpdate:modelValue":e[9]||(e[9]=s=>u.value.ship_slot=s),switch:"",state:u.value.ship_slot?!0:null},{default:c(()=>[p(n(a(o)("view.ship-db.label_shipSlotFilterActive")),1)]),_:1},8,["modelValue","state"]),_(d),_(i,{modelValue:r.value.ship_slot,"onUpdate:modelValue":[e[10]||(e[10]=s=>r.value.ship_slot=s),e[11]||(e[11]=s=>L("ship_slot"))],switch:"",state:r.value.ship_slot?!0:null},{default:c(()=>[p(n(a(o)("view.ship-db.label_selectAllShipSlot")),1)]),_:1},8,["modelValue","state"]),l("div",He,[(w(!0),v(V,null,k(S.value,s=>(w(),v("div",Ne,[_(i,{class:"ms-2",modelValue:s.isShown,"onUpdate:modelValue":h=>s.isShown=h,switch:"",state:s.isShown?!0:null},{default:c(()=>[p(n(a(o)("weapon.size."+s.sizeCode))+n(a(o)("weapon.type."+s.typeCode)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","state"])]))),256))])])]),_:1},8,["text","variant"])]),l("div",De,[l("div",Me,[l("button",{class:E(["btn",[u.value.compare?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[12]||(e[12]=s=>M("compare"))},n(u.value.compare?a(o)("common.label.on"):a(o)("common.label.off"))+"-"+n(a(o)("common.label.compare"))+" "+n(H.value),3)])]),l("div",qe,[l("div",Ge,[l("button",{class:E(["btn",[a(m).isCacheEnabled.value?"btn-primary":"btn-outline-primary"]]),type:"button",onClick:e[13]||(e[13]=s=>a(m).switchCache())},n(a(m).isCacheEnabled.value?a(o)("common.label.on"):a(o)("common.label.off"))+"-"+n(a(o)("common.label.localStorage")),3)])])])]),e[19]||(e[19]=l("div",null,null,-1)),l("div",Je,[_(a(ee),{rows:N.value,columns:f.value,sortable:!0,cloneHeaderInFooter:!0,stickyFirstColumn:!0,search:C.value.search,page:C.value.page,pageSize:C.value.pageSize,class:"alt-pagination",skin:"bh-table-striped bh-table-hover bh-table-bordered bh-table-compact"},{s_title_t:c(s=>[l("div",Ke,[l("img",{src:G(s.value.s_spriteName),style:{width:"58px"}},null,8,Qe),p(" "+n(s.value.s_title_t),1)])]),compare:c(s=>[l("div",Xe,[l("button",{type:"button",class:E(["btn",[s.value._isCompare?"btn-success":"btn-secondary"]]),onClick:h=>K(s)},n(s.value._isCompare?"+":"-"),11,Ye)])]),_:1},8,["rows","columns","search","page","pageSize"])]),e[20]||(e[20]=l("div",{class:"card-footer clearfix"},[l("p",{class:"float-end m-0"},"support version v0.97a-rc11")],-1))])])])])])],64)}}};export{lt as default};
