import{l as He,m as oe,w as R,c as t,p as A,q as Ie,s as Pe,x as Ee,y as Le,z as le,b as M,j as u,h as a,A as Q,B as Oe,C as Re,D as F,E as Ne,G as Ke,H as Ze,I as D,J as S,g as _,K as v,L as B,T as U,M as T,i as X,d as H,N as je,n as $,O as C,P as w,Q as qe,f as I,t as P,F as We,e as Ge,S as Y,U as Je}from"./index-CpN8qdcX.js";import{u as te,b as Qe,c as Ue,d as Xe,i as Ye,e as E,f as L,g as ea}from"./projectKeys-DIv5ch3b.js";const O="modal-open",aa=()=>{const s=Ie(Ee),b=o=>{s==null||s.removeStack(o),s==null||s.removeRegistry(o)},y=Pe("updateHTMLAttrs",(o,e,c)=>{const f=typeof o=="string"?window==null?void 0:window.document.querySelector(o):Le(o);f&&(e==="class"?f.classList.toggle(O,c===O):f.setAttribute(e,c))});return oe(()=>{y("body","class","")}),R(()=>s==null?void 0:s.countStack.value,o=>{o!==void 0&&y("body","class",o>0?O:"")}),{...s,dispose:b}},oa=(s,b)=>{const{pushRegistry:y,pushStack:o,removeStack:e,stack:c,dispose:f,countStack:r}=aa(),l=He();if(!l||l.type.__name!=="BModal")throw new Error("useModalManager must only use in BModal component");y==null||y(l),oe(()=>{f(l)});const g=(m,p)=>{m?o==null||o(l):p&&!m&&(e==null||e(l))};return g(b,b),R(s,g),{activePosition:t(()=>c==null?void 0:c.value.findIndex(m=>{var p,h;return A((p=m.exposed)==null?void 0:p.id)===A((h=l.exposed)==null?void 0:h.id)})),activeModalCount:r,stackWithoutSelf:t(()=>(c==null?void 0:c.value.filter(m=>{var p,h;return A((p=m.exposed)==null?void 0:p.id)!==A((h=l.exposed)==null?void 0:h.id)}))??[])}},la=["type","disabled","aria-label"],ta=le({__name:"BCloseButton",props:{ariaLabel:{default:"Close"},disabled:{type:Boolean,default:!1},type:{default:"button"}},emits:["click"],setup(s,{emit:b}){const o=te(s,"BCloseButton"),e=b;return(c,f)=>(u(),M("button",{type:a(o).type,class:"btn-close",disabled:a(o).disabled,"aria-label":a(o).ariaLabel,onClick:f[0]||(f[0]=r=>e("click",r))},null,8,la))}}),sa=["id","aria-labelledby","aria-describedby"],na=["id"],ee="modal-fallback-focus",ae=1056,da=le({inheritAttrs:!1,__name:"BModal",props:Q({autofocus:{type:Boolean,default:!0},autofocusButton:{default:void 0},backdropFirst:{type:Boolean,default:!1},body:{default:void 0},bodyAttrs:{default:void 0},bodyBgVariant:{default:null},bodyClass:{default:null},bodyScrolling:{type:Boolean,default:!1},bodyTextVariant:{default:null},bodyVariant:{default:null},busy:{type:Boolean,default:!1},buttonSize:{default:"md"},cancelDisabled:{type:Boolean,default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{type:Boolean,default:!1},contentClass:{default:void 0},dialogClass:{default:void 0},footerBgVariant:{default:null},footerBorderVariant:{default:null},footerClass:{default:void 0},footerTextVariant:{default:null},footerVariant:{default:null},fullscreen:{type:[Boolean,String],default:!1},headerBgVariant:{default:null},headerBorderVariant:{default:null},headerClass:{default:void 0},headerCloseClass:{default:void 0},headerCloseLabel:{default:"Close"},headerCloseVariant:{default:"secondary"},headerTextVariant:{default:null},headerVariant:{default:null},noBackdrop:{type:Boolean,default:!1},noFooter:{type:Boolean,default:!1},noHeader:{type:Boolean,default:!1},noHeaderClose:{type:Boolean,default:!1},id:{default:void 0},modalClass:{default:void 0},noCloseOnBackdrop:{type:Boolean,default:!1},noCloseOnEsc:{type:Boolean,default:!1},noTrap:{type:Boolean,default:!1},noStacking:{type:Boolean},okDisabled:{type:Boolean,default:!1},okOnly:{type:Boolean,default:!1},okTitle:{default:"OK"},okVariant:{default:"primary"},scrollable:{type:Boolean,default:!1},size:{default:"md"},title:{default:void 0},titleClass:{default:void 0},titleVisuallyHidden:{type:Boolean,default:!1},titleTag:{default:"h5"},teleportDisabled:{type:Boolean,default:!1},teleportTo:{default:"body"},initialAnimation:{type:Boolean,default:!1},noAnimation:{type:Boolean},noFade:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},show:{type:Boolean,default:!1},transProps:{default:void 0},visible:{type:Boolean,default:!1}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:Q(["backdrop","cancel","close","esc","ok","hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented"],["update:modelValue"]),setup(s,{expose:b,emit:y}){const e=te(s,"BModal"),c=y,f=Oe(),r=Ue(()=>e.id,"modal"),l=Re(s,"modelValue"),g=F("_element"),m=F("_fallbackFocusElement"),p=F("_okButton"),h=F("_cancelButton"),se=F("_closeButton"),ne=()=>{e.autofocus!==!1&&(e.autofocusButton==="ok"?Be.value=!0:e.autofocusButton==="close"?ge.value=!0:e.autofocusButton==="cancel"?Ce.value=!0:ke.value=!0)},N=()=>{ne()},{showRef:k,renderRef:de,renderBackdropRef:ue,hide:d,show:re,toggle:ie,computedNoAnimation:z,transitionProps:ce,backdropTransitionProps:fe,isLeaving:K,isVisible:pe,trapActive:ve,contentShowing:Z,backdropReady:be,backdropVisible:ye}=Xe(l,e,c,g,r,{transitionProps:{onAfterEnter:N}}),{needsFallback:me}=Ne({element:g,isActive:ve,noTrap:()=>e.noTrap,fallbackFocus:{ref:m,classSelector:ee}});Ke("Escape",()=>{d("esc")},{target:g}),Ze(k,()=>e.bodyScrolling);const{focused:ke}=D(g,{initialValue:l.value&&e.autofocusButton===void 0&&e.autofocus===!0}),{focused:Be}=D(p,{initialValue:l.value&&e.autofocusButton==="ok"&&e.autofocus===!0}),{focused:Ce}=D(h,{initialValue:l.value&&e.autofocusButton==="cancel"&&e.autofocus===!0}),{focused:ge}=D(se,{initialValue:l.value&&e.autofocusButton==="close"&&e.autofocus===!0}),j=t(()=>!Ye(f["header-close"])),he=t(()=>[e.dialogClass,{"modal-fullscreen":e.fullscreen===!0,[`modal-fullscreen-${e.fullscreen}-down`]:typeof e.fullscreen=="string",[`modal-${e.size}`]:e.size!=="md","modal-dialog-centered":e.centered,"modal-dialog-scrollable":e.scrollable}]),Ve=E(()=>({bgVariant:e.bodyBgVariant,textVariant:e.bodyTextVariant,variant:e.bodyVariant})),Se=t(()=>[e.bodyClass,Ve.value]),_e=E(()=>({bgVariant:e.headerBgVariant,textVariant:e.headerTextVariant,variant:e.headerVariant,borderVariant:e.headerBorderVariant})),Te=t(()=>[e.headerClass,_e.value]),q=t(()=>({variant:j.value?e.headerCloseVariant:void 0,class:e.headerCloseClass})),$e=E(()=>({bgVariant:e.footerBgVariant,textVariant:e.footerTextVariant,variant:e.footerVariant,borderVariant:e.footerBorderVariant})),we=t(()=>[e.footerClass,$e.value]),Me=t(()=>[e.titleClass,{"visually-hidden":e.titleVisuallyHidden}]),xe=t(()=>e.cancelDisabled||e.busy),Fe=t(()=>e.okDisabled||e.busy),{activePosition:W,activeModalCount:G,stackWithoutSelf:ze}=oa(k,l.value);R(ze,(i,n)=>{i.length>n.length&&k.value===!0&&e.noStacking===!0&&d()});const J=t(()=>k.value||K.value?ae-(((G==null?void 0:G.value)??0)*2-((W==null?void 0:W.value)??0)*2):ae),Ae=t(()=>({"z-index":J.value})),De=t(()=>({"z-index":J.value-1})),V=t(()=>({cancel:()=>{d("cancel")},close:()=>{d("close")},hide:d,ok:()=>{d("ok")},active:k.value,visible:k.value}));return b({hide:d,id:r,show:re,toggle:ie}),(i,n)=>(u(),S(ea,{to:a(e).teleportTo,disabled:a(e).teleportDisabled},{default:_(()=>[a(de)||a(Z)?(u(),S(U,T({key:0},a(ce),{appear:l.value||a(e).visible,onAfterEnter:N}),{default:_(()=>[X(H("div",T({id:a(r),ref:"_element",class:["modal",[a(e).modalClass,{fade:!a(z),show:a(pe)}]],role:"dialog","aria-labelledby":a(e).noHeader?void 0:`${a(r)}-label`,"aria-describedby":`${a(r)}-body`,tabindex:"-1"},i.$attrs,{style:Ae.value,onClick:n[4]||(n[4]=je(x=>a(d)("backdrop"),["self"]))}),[H("div",{class:$(["modal-dialog",he.value])},[a(Z)?(u(),M("div",{key:0,class:$(["modal-content",a(e).contentClass])},[a(e).noHeader?v("",!0):(u(),M("div",{key:0,class:$(["modal-header",Te.value])},[B(i.$slots,"header",C(w(V.value)),()=>[(u(),S(qe(a(e).titleTag),{id:`${a(r)}-label`,class:$(["modal-title",Me.value])},{default:_(()=>[B(i.$slots,"title",C(w(V.value)),()=>[I(P(a(e).title),1)],!0)]),_:3},8,["id","class"])),a(e).noHeaderClose?v("",!0):(u(),M(We,{key:0},[j.value?(u(),S(L,T({key:0},q.value,{onClick:n[0]||(n[0]=x=>a(d)("close"))}),{default:_(()=>[B(i.$slots,"header-close",{},void 0,!0)]),_:3},16)):(u(),S(ta,T({key:1,"aria-label":a(e).headerCloseLabel},q.value,{onClick:n[1]||(n[1]=x=>a(d)("close"))}),null,16,["aria-label"]))],64))],!0)],2)),H("div",T({id:`${a(r)}-body`,class:["modal-body",Se.value]},a(e).bodyAttrs),[B(i.$slots,"default",C(w(V.value)),()=>[I(P(a(e).body),1)],!0)],16,na),a(e).noFooter?v("",!0):(u(),M("div",{key:1,class:$(["modal-footer",we.value])},[B(i.$slots,"footer",C(w(V.value)),()=>[B(i.$slots,"cancel",C(w(V.value)),()=>[a(e).okOnly?v("",!0):(u(),S(L,{key:0,ref:"_cancelButton",disabled:xe.value,size:a(e).buttonSize,variant:a(e).cancelVariant,onClick:n[2]||(n[2]=x=>a(d)("cancel"))},{default:_(()=>[I(P(a(e).cancelTitle),1)]),_:1},8,["disabled","size","variant"]))],!0),B(i.$slots,"ok",C(w(V.value)),()=>[Ge(L,{ref:"_okButton",disabled:Fe.value,size:a(e).buttonSize,variant:a(e).okVariant,onClick:n[3]||(n[3]=x=>a(d)("ok"))},{default:_(()=>[I(P(a(e).okTitle),1)]),_:1},8,["disabled","size","variant"])],!0)],!0)],2))],2)):v("",!0)],2),a(me)?(u(),M("div",{key:0,ref:"_fallbackFocusElement",class:$(ee),tabindex:"0",style:{width:"0",height:"0",overflow:"hidden"}},null,512)):v("",!0)],16,sa),[[Y,a(k)&&(a(be)&&a(e).backdropFirst||!a(e).backdropFirst)]])]),_:3},16,["appear"])):v("",!0),a(e).noBackdrop?v("",!0):B(i.$slots,"backdrop",C(T({key:1},V.value)),()=>[a(ue)?(u(),S(U,C(T({key:0},a(fe))),{default:_(()=>[X(H("div",{class:$(["modal-backdrop",{fade:!a(z),show:a(ye)||a(z)}]),style:Je(De.value),onClick:n[5]||(n[5]=x=>a(d)("backdrop"))},null,6),[[Y,a(k)||a(K)&&a(e).backdropFirst&&!a(z)]])]),_:1},16)):v("",!0)],!0)]),_:3},8,["to","disabled"]))}}),ia=Qe(da,[["__scopeId","data-v-93972863"]]);export{ia as B};
